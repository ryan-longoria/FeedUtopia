const ai="Logging",ci="NoHubcallbackProvidedException";var B;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(B||(B={}));const nn={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class q{constructor(t,n=B.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let o=this.level;q.LOG_LEVEL&&(o=q.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);const i=nn[o];if(!(nn[t]>=i))return;let r=console.log.bind(console);t===B.ERROR&&console.error&&(r=console.error.bind(console)),t===B.WARN&&console.warn&&(r=console.warn.bind(console)),q.BIND_ALL_LOG_LEVELS&&(t===B.INFO&&console.info&&(r=console.info.bind(console)),t===B.DEBUG&&console.debug&&(r=console.debug.bind(console)));const d=`[${t}] ${this._ts()} ${this.name}`;let c="";if(n.length===1&&typeof n[0]=="string")c=`${d} - ${n[0]}`,r(c);else if(n.length===1)c=`${d} ${n[0]}`,r(d,n[0]);else if(typeof n[0]=="string"){let a=n.slice(1);a.length===1&&(a=a[0]),c=`${d} - ${n[0]} ${a}`,r(`${d} - ${n[0]}`,a)}else c=`${d} ${n}`,r(d,n);for(const a of this._pluggables){const u={message:c,timestamp:Date.now()};a.pushLogs([u])}}log(...t){this._log(B.INFO,...t)}info(...t){this._log(B.INFO,...t)}warn(...t){this._log(B.WARN,...t)}error(...t){this._log(B.ERROR,...t)}debug(...t){this._log(B.DEBUG,...t)}verbose(...t){this._log(B.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===ai&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}q.LOG_LEVEL=null;q.BIND_ALL_LOG_LEVELS=!1;class W extends Error{constructor({message:t,name:n,recoverySuggestion:o,underlyingError:i,metadata:s}){if(super(t),this.name=n,this.underlyingError=i,this.recoverySuggestion=o,s){const{extendedRequestId:r,httpStatusCode:d,requestId:c}=s;this.metadata={extendedRequestId:r,httpStatusCode:d,requestId:c}}this.constructor=W,Object.setPrototypeOf(this,W.prototype)}}var Ee;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(Ee||(Ee={}));const Ut=(e,t=W)=>(n,o,i)=>{const{message:s,recoverySuggestion:r}=e[o];if(!n)throw new t({name:o,message:i?`${s} ${i}`:s,recoverySuggestion:r})},Ce=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",Le=new q("Hub");class fo{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const o=this.listeners.get(t);if(!o){Le.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...o.filter(({callback:i})=>i!==n)])}dispatch(t,n,o,i){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(i===Ce||Le.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const s={channel:t,payload:{...n},source:o,patternInfo:[]};try{this._toListeners(s)}catch(r){Le.error(r)}}listen(t,n,o="noname"){let i;if(typeof n!="function")throw new W({name:ci,message:"No callback supplied to Hub"});i=n;let s=this.listeners.get(t);return s||(s=[],this.listeners.set(t,s)),s.push({name:o,callback:i}),()=>{this._remove(t,i)}}_toListeners(t){const{channel:n,payload:o}=t,i=this.listeners.get(n);i&&i.forEach(s=>{Le.debug(`Dispatching to ${n} with `,o);try{s.callback(t)}catch(r){Le.error(r)}})}}const Ne=new fo("__default__"),rt=new fo("internal-hub"),di=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new W({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},ui=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new W({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},li=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new W({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},Mt={convert(e,t){let n=e;return t!=null&&t.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),li()(n)}};var te;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(te||(te={}));const hi={[te.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[te.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[te.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[te.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[te.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},bt=Ut(hi);function w(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,bt(t,te.AuthUserPoolException)}function go(e){var n,o,i,s,r,d,c,a;const t=!!((o=(n=e==null?void 0:e.loginWith)==null?void 0:n.oauth)!=null&&o.domain)&&!!((s=(i=e==null?void 0:e.loginWith)==null?void 0:i.oauth)!=null&&s.redirectSignOut)&&!!((d=(r=e==null?void 0:e.loginWith)==null?void 0:r.oauth)!=null&&d.redirectSignIn)&&!!((a=(c=e==null?void 0:e.loginWith)==null?void 0:c.oauth)!=null&&a.responseType);bt(t,te.OAuthNotConfigureException)}function nt(e){const t=!!(e!=null&&e.identityPoolId);bt(t,te.InvalidIdentityPoolIdException)}function ve(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(Mt.convert(o).split("").map(r=>`%${`00${r.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),s=JSON.parse(i);return{toString:()=>e,payload:s}}catch{throw new Error("Invalid token payload")}}const Eo=e=>{const t=Reflect.ownKeys(e);for(const n of t){const o=e[n];(o&&typeof o=="object"||typeof o=="function")&&Eo(o)}return Object.freeze(e)},pi=new q("parseAWSExports"),fi={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},gi=(e={})=>{var jt,Yt,Jt,Xt,Qt,Zt;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new W({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:o,aws_appsync_region:i,aws_bots_config:s,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:d,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:a,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:h,aws_cognito_social_providers:p,aws_cognito_username_attributes:f,aws_mandatory_sign_in:E,aws_mobile_analytics_app_id:m,aws_mobile_analytics_app_region:S,aws_user_files_s3_bucket:P,aws_user_files_s3_bucket_region:K,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:pe,aws_user_pools_id:A,aws_user_pools_web_client_id:M,geo:k,oauth:X,predictions:$,aws_cloud_logic_custom:me,Notifications:Ie,modelIntrospection:Q}=e,b={};m&&(b.Analytics={Pinpoint:{appId:m,region:S}});const{InAppMessaging:ye,Push:Se}=Ie??{};if(ye!=null&&ye.AWSPinpoint||Se!=null&&Se.AWSPinpoint){if(ye!=null&&ye.AWSPinpoint){const{appId:x,region:we}=ye.AWSPinpoint;b.Notifications={InAppMessaging:{Pinpoint:{appId:x,region:we}}}}if(Se!=null&&Se.AWSPinpoint){const{appId:x,region:we}=Se.AWSPinpoint;b.Notifications={...b.Notifications,PushNotification:{Pinpoint:{appId:x,region:we}}}}}if(Array.isArray(s)&&(b.Interactions={LexV1:Object.fromEntries(s.map(x=>[x.name,x]))}),o){const x=fi[n];x||pi.debug(`Invalid authentication type ${n}. Falling back to IAM.`),b.API={GraphQL:{endpoint:o,apiKey:t,region:i,defaultAuthMode:x??"iam"}},Q&&(b.API.GraphQL.modelIntrospection=Q)}const ei=c?{status:c&&c.toLowerCase(),totpEnabled:(a==null?void 0:a.includes("TOTP"))??!1,smsEnabled:(a==null?void 0:a.includes("SMS"))??!1}:void 0,ti=u?{minLength:u.passwordPolicyMinLength,requireLowercase:((jt=u.passwordPolicyCharacters)==null?void 0:jt.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((Yt=u.passwordPolicyCharacters)==null?void 0:Yt.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((Jt=u.passwordPolicyCharacters)==null?void 0:Jt.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((Xt=u.passwordPolicyCharacters)==null?void 0:Xt.includes("REQUIRES_SYMBOLS"))??!1}:void 0,ni=Array.from(new Set([...l??[],...h??[]])).reduce((x,we)=>({...x,[we.toLowerCase()]:{required:!0}}),{}),Gt=(f==null?void 0:f.includes("EMAIL"))??!1,zt=(f==null?void 0:f.includes("PHONE_NUMBER"))??!1;(r||A)&&(b.Auth={Cognito:{identityPoolId:r,allowGuestAccess:E!=="enable",signUpVerificationMethod:d,userAttributes:ni,userPoolClientId:M,userPoolId:A,mfa:ei,passwordFormat:ti,loginWith:{username:!(Gt||zt),email:Gt,phone:zt}}});const oi=X?Object.keys(X).length>0:!1,ii=p?p.length>0:!1;if(b.Auth&&oi&&(b.Auth.Cognito.loginWith={...b.Auth.Cognito.loginWith,oauth:{...Ei(X),...ii&&{providers:mi(p)}}}),P&&(b.Storage={S3:{bucket:P,region:K,dangerouslyConnectToHttpEndpointForTesting:pe}}),k){const{amazon_location_service:x}=k;b.Geo={LocationService:{maps:x.maps,geofenceCollections:x.geofenceCollections,searchIndices:x.search_indices,region:x.region}}}if(me&&(b.API={...b.API,REST:me.reduce((x,we)=>{const{name:si,endpoint:ri,region:en,service:tn}=we;return{...x,[si]:{endpoint:ri,...tn?{service:tn}:void 0,...en?{region:en}:void 0}}},{})}),$){const{VoiceId:x}=((Zt=(Qt=$==null?void 0:$.convert)==null?void 0:Qt.speechGenerator)==null?void 0:Zt.defaults)??{};b.Predictions=x?{...$,convert:{...$.convert,speechGenerator:{...$.convert.speechGenerator,defaults:{voiceId:x}}}}:$}return b},on=e=>(e==null?void 0:e.split(","))??[],Ei=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:o,responseType:i})=>({domain:e,scopes:t,redirectSignIn:on(n),redirectSignOut:on(o),responseType:i}),mi=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),Ii=Symbol("oauth-listener"),D=[];for(let e=0;e<256;++e)D.push((e+256).toString(16).slice(1));function yi(e,t=0){return(D[e[t+0]]+D[e[t+1]]+D[e[t+2]]+D[e[t+3]]+"-"+D[e[t+4]]+D[e[t+5]]+"-"+D[e[t+6]]+D[e[t+7]]+"-"+D[e[t+8]]+D[e[t+9]]+"-"+D[e[t+10]]+D[e[t+11]]+D[e[t+12]]+D[e[t+13]]+D[e[t+14]]+D[e[t+15]]).toLowerCase()}let mt;const Si=new Uint8Array(16);function wi(){if(!mt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mt=crypto.getRandomValues.bind(crypto)}return mt(Si)}const Ci=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sn={randomUUID:Ci};function vi(e,t,n){var i;if(sn.randomUUID&&!t&&!e)return sn.randomUUID();e=e||{};const o=e.random??((i=e.rng)==null?void 0:i.call(e))??wi();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(n=n||0,n<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let s=0;s<16;++s)t[n+s]=o[s];return t}return yi(o)}function Ai(e){const{version:t}=e;return t?t.startsWith("1"):!1}function Ti(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:o}=e;return{S3:{bucket:t,region:n,buckets:o&&Fi(o)}}}function Ri(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:o,password_policy:i,mfa_configuration:s,mfa_methods:r,unauthenticated_identities_enabled:d,oauth:c,username_attributes:a,standard_required_attributes:u,groups:l}=e,h={Cognito:{userPoolId:t,userPoolClientId:n,groups:l}};return o&&(h.Cognito={...h.Cognito,identityPoolId:o}),i&&(h.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),s&&(h.Cognito.mfa={status:Oi(s),smsEnabled:r==null?void 0:r.includes("SMS"),totpEnabled:r==null?void 0:r.includes("TOTP")}),d&&(h.Cognito.allowGuestAccess=d),c&&(h.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:c.response_type==="token"?"token":"code",scopes:c.scopes,providers:Di(c.identity_providers)}}),a&&(h.Cognito.loginWith={...h.Cognito.loginWith,email:a.includes("email"),phone:a.includes("phone_number"),username:a.includes("username")}),u&&(h.Cognito.userAttributes=u.reduce((p,f)=>({...p,[f]:{required:!0}}),{})),h}function xi(e){if(!(e!=null&&e.amazon_pinpoint))return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function _i(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:o,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:o}}}function Pi(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:o,api_key:i,model_introspection:s}=e;return{GraphQL:{endpoint:o,defaultAuthMode:mo(n),region:t,apiKey:i,modelIntrospection:s}}}function Ni(e){if(!(e!=null&&e.events))return;const{url:t,aws_region:n,api_key:o,default_authorization_type:i}=e.events;return{Events:{endpoint:t,defaultAuthMode:mo(i),region:n,apiKey:o}}}function Ui(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:o}=e,i=n.includes("IN_APP_MESSAGING"),s=n.includes("APNS")||n.includes("FCM");if(!(i||s))return;const r={};return i&&(r.InAppMessaging={Pinpoint:{appId:o,region:t}}),s&&(r.PushNotification={Pinpoint:{appId:o,region:t}}),r}function Mi(e){const t={};if(e.storage&&(t.Storage=Ti(e.storage)),e.auth&&(t.Auth=Ri(e.auth)),e.analytics&&(t.Analytics=xi(e.analytics)),e.geo&&(t.Geo=_i(e.geo)),e.data&&(t.API=Pi(e.data)),e.custom){const n=Ni(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=Ui(e.notifications)),t}const bi={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function mo(e){return bi[e]}const rn={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function Di(e=[]){return e.reduce((t,n)=>(rn[n]!==void 0&&t.push(rn[n]),t),[])}function Oi(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function Fi(e){const t={};return e.forEach(({name:n,bucket_name:o,aws_region:i,paths:s})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);const r=s?Object.entries(s).reduce((d,[c,a])=>(a!==void 0&&(d[c]=a),d),{}):void 0;t[n]={bucketName:o,region:i,paths:r}}),t}const Io=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?gi(e):Ai(e)?Mi(e):e;function ki(e,t,n,o){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function d(u){try{a(o.next(u))}catch(l){r(l)}}function c(u){try{a(o.throw(u))}catch(l){r(l)}}function a(u){u.done?s(u.value):i(u.value).then(d,c)}a((o=o.apply(e,t||[])).next())})}function Li(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,i,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=d(0),r.throw=d(1),r.return=d(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function d(a){return function(u){return c([a,u])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(n=0)),n;)try{if(o=1,i&&(s=a[0]&2?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[a[0]&2,s.value]),a[0]){case 0:case 1:s=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(a[0]===6&&n.label<s[1]){n.label=s[1],s=a;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(a);break}s[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(u){a=[6,u],i=0}finally{o=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var G=64,Ki=32,Wi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bi=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],qi=Math.pow(2,53)-1,ot=function(){function e(){this.state=Int32Array.from(Bi),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,o=t.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>qi)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[n++],o--,this.bufferLength===G&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(n.setUint8(this.bufferLength++,128),o%G>=G-8){for(var i=this.bufferLength;i<G;i++)n.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<G-8;i++)n.setUint8(i,0);n.setUint32(G-8,Math.floor(t/4294967296),!0),n.setUint32(G-4,t),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(Ki),i=0;i<8;i++)s[i*4]=this.state[i]>>>24&255,s[i*4+1]=this.state[i]>>>16&255,s[i*4+2]=this.state[i]>>>8&255,s[i*4+3]=this.state[i]>>>0&255;return s},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,o=t.state,i=o[0],s=o[1],r=o[2],d=o[3],c=o[4],a=o[5],u=o[6],l=o[7],h=0;h<G;h++){if(h<16)this.temp[h]=(n[h*4]&255)<<24|(n[h*4+1]&255)<<16|(n[h*4+2]&255)<<8|n[h*4+3]&255;else{var p=this.temp[h-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[h-15];var E=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[h]=(f+this.temp[h-7]|0)+(E+this.temp[h-16]|0)}var m=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&a^~c&u)|0)+(l+(Wi[h]+this.temp[h]|0)|0)|0,S=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&s^i&r^s&r)|0;l=u,u=a,a=c,c=d+m|0,d=r,r=s,s=i,i=m+S|0}o[0]+=i,o[1]+=s,o[2]+=r,o[3]+=d,o[4]+=c,o[5]+=a,o[6]+=u,o[7]+=l},e}();const Hi=e=>new TextEncoder().encode(e);var Vi=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Hi;function yo(e){return e instanceof Uint8Array?e:typeof e=="string"?Vi(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function $i(e){return typeof e=="string"?e.length===0:e.byteLength===0}var at=function(){function e(t){this.secret=t,this.hash=new ot,this.reset()}return e.prototype.update=function(t){if(!($i(t)||this.error))try{this.hash.update(yo(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return ki(this,void 0,void 0,function(){return Li(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new ot,this.secret){this.outer=new ot;var t=Gi(this.secret),n=new Uint8Array(G);n.set(t);for(var o=0;o<G;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}},e}();function Gi(e){var t=yo(e);if(t.byteLength>G){var n=new ot;n.update(t),t=n.digest()}var o=new Uint8Array(G);return o.set(t),o}for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}var N;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(N||(N={}));var Ct;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(Ct||(Ct={}));var an;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(an||(an={}));var cn;(function(e){e.Record="1",e.IdentifyUser="2"})(cn||(cn={}));var dn;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(dn||(dn={}));var R;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"})(R||(R={}));var un;(function(e){e.Subscribe="1",e.GraphQl="2"})(un||(un={}));var ln;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(ln||(ln={}));var hn;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(hn||(hn={}));var pn;(function(e){e.None="0"})(pn||(pn={}));var fn;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(fn||(fn={}));var gn;(function(e){e.Subscribe="1"})(gn||(gn={}));var En;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(En||(En={}));var mn;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"})(mn||(mn={}));const zi="6.15.5",lt=()=>typeof global<"u",Me=()=>typeof window<"u",So=()=>typeof document<"u",Dt=()=>typeof process<"u",He=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var In={};function ji(){const e=o=>o.startsWith("_react")||o.startsWith("__react"),t=o=>Object.keys(o).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return So()&&n().some(t)}function Yi(){return Dt()&&typeof In<"u"&&!!Object.keys(In).find(e=>e.includes("react"))}function Ji(){return Me()&&He(window,"__VUE")}function Xi(){return lt()&&He(global,"__VUE")}var yn={};function Qi(){return Me()&&He(window,"__SVELTE")}function Zi(){return Dt()&&typeof yn<"u"&&!!Object.keys(yn).find(e=>e.includes("svelte"))}function es(){return Me()&&window.next&&typeof window.next=="object"}function ts(){return lt()&&(He(global,"__next")||He(global,"__NEXT"))}function ns(){return Me()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function os(){return lt()&&typeof global.__NUXT_PATHS__<"u"}var Sn={};function is(){const e=!!(So()&&document.querySelector("[ng-version]")),t=!!(Me()&&typeof window.ng<"u");return e||t}function ss(){var e;return Dt()&&typeof Sn=="object"&&((e=Sn.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function rs(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function as(){return lt()&&typeof global.expo<"u"}function cs(){return Me()}const ds=[{platform:N.Expo,detectionMethod:as},{platform:N.ReactNative,detectionMethod:rs},{platform:N.NextJs,detectionMethod:es},{platform:N.Nuxt,detectionMethod:ns},{platform:N.Angular,detectionMethod:is},{platform:N.React,detectionMethod:ji},{platform:N.VueJs,detectionMethod:Ji},{platform:N.Svelte,detectionMethod:Qi},{platform:N.WebUnknown,detectionMethod:cs},{platform:N.NextJsSSR,detectionMethod:ts},{platform:N.NuxtSSR,detectionMethod:os},{platform:N.ReactSSR,detectionMethod:Yi},{platform:N.VueJsSSR,detectionMethod:Xi},{platform:N.AngularSSR,detectionMethod:ss},{platform:N.SvelteSSR,detectionMethod:Zi}];function us(){var e;return((e=ds.find(t=>t.detectionMethod()))==null?void 0:e.platform)||N.ServerSideUnknown}let qe;const It=[];let vt=!1;const ls=10,hs=10,ps=1e3,wo=()=>{var e;if(!qe){if(qe=us(),vt)for(;It.length;)(e=It.pop())==null||e();else It.forEach(t=>{t()});wn(N.ServerSideUnknown,ls),wn(N.WebUnknown,hs)}return qe};function fs(){qe=void 0}function wn(e,t){qe===e&&!vt&&setTimeout(()=>{fs(),vt=!0,setTimeout(wo,ps)},t)}const gs={},Es=(e,t)=>{var n,o;return(o=(n=gs[e])==null?void 0:n[t])==null?void 0:o.additionalDetails},ms="aws-amplify",Is=e=>e.replace(/\+.*/,""),ys=({category:e,action:t}={})=>{const n=[[ms,Is(zi)]];if(e&&n.push([e,t]),n.push(["framework",wo()]),e&&t){const o=Es(e,t);o&&o.forEach(i=>{n.push(i)})}return n},ht=e=>ys(e).map(([o,i])=>o&&i?`${o}/${i}`:o).join(" "),Co=()=>typeof window<"u"&&typeof window.document<"u",Cn=new q("Auth");class Ss{configure(t,n){var o,i;this.authConfig=t,this.authOptions=n,t&&((o=t.Cognito)!=null&&o.userPoolEndpoint)&&Cn.warn(vn("Amazon Cognito User Pool")),t&&((i=t.Cognito)!=null&&i.identityPoolEndpoint)&&Cn.warn(vn("Amazon Cognito Identity Pool"))}async fetchAuthSession(t={}){var s,r,d,c,a,u;let n,o;const i=await this.getTokens(t);return i?(o=(r=(s=i.accessToken)==null?void 0:s.payload)==null?void 0:r.sub,n=await((c=(d=this.authOptions)==null?void 0:d.credentialsProvider)==null?void 0:c.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:t.forceRefresh}))):n=await((u=(a=this.authOptions)==null?void 0:a.credentialsProvider)==null?void 0:u.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh})),{tokens:i,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:o}}async clearCredentials(){var t,n;await((n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId())}async getTokens(t){var n,o;return await((o=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:o.getTokens(t))??void 0}}const vn=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;class ws{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Ss}configure(t,n){const o=Io(t);this.resourcesConfig=o,n&&(this.libraryOptions=n),this.resourcesConfig=Eo(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),Ne.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",Ce),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[Ii](t){var n,o,i;(o=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&o.oauth?t((i=this.resourcesConfig.Auth)==null?void 0:i.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,o;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((o=this.resourcesConfig.Auth)==null?void 0:o.Cognito),this.oAuthListener=void 0)}}const T=new ws,Cs=(e,t)=>e.Auth.fetchAuthSession(t),An=e=>Cs(T,e);function vo(){return T.Auth.clearCredentials()}const pt=e=>{const{headers:t,statusCode:n}=e;return{...vs(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},vs=e=>typeof(e==null?void 0:e.$metadata)=="object",be=async e=>{if(!e||e.statusCode<300)return;const t=await $e(e),o=(r=>{const[d]=r.toString().split(/[,:]+/);return d.includes("#")?d.split("#")[1]:d})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),i=t.message??t.Message??"Unknown error",s=new Error(i);return Object.assign(s,{name:o,$metadata:pt(e)})},$e=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:pt(e)})},Y=(e,t,n,o)=>async(i,s)=>{const r={...o,...i},d=await r.endpointResolver(r,s),c=await t(s,d),a=await e(c,{...r});return n(a)},As=5*60*1e3;function Ts(e=As){return o=>{const i=2**o*100+100*Math.random();return i>e?!1:i}}const Ao=3,Tn="amz-sdk-invocation-id",Rs="amz-sdk-request",Rn=5*60*1e3,To=e=>{const n=Ts(Rn)(e);return n===!1?Rn:n},xs=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],_s=e=>!!e&&xs.includes(e),Ro=e=>async(t,n)=>{const o=n??await e(t)??void 0,i=(o==null?void 0:o.code)||(o==null?void 0:o.name),s=t==null?void 0:t.statusCode;return{retryable:Ms(n)||Us(s,i)||_s(i)||bs(s,i)}},Ps=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Ns=["TimeoutError","RequestTimeout","RequestTimeoutException"],Us=(e,t)=>e===429||!!t&&Ps.includes(t),Ms=e=>[Ee.NetworkError,"ERR_NETWORK"].includes(e==null?void 0:e.name),bs=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&Ns.includes(t),xo="cognito-identity",_o={service:xo,retryDecider:Ro(be),computeDelay:To,cache:"no-store"},Ds=({maxAttempts:e=Ao,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,s)=>async function(d){let c,a=s.attemptsCount??0,u;const l=()=>{if(u)return xn(u,a),u;throw xn(c,a),c};for(;!(o!=null&&o.aborted)&&a<e;){try{u=await i(d),c=void 0}catch(f){c=f,u=void 0}a=(s.attemptsCount??0)>a?s.attemptsCount??0:a+1,s.attemptsCount=a;const{isCredentialsExpiredError:h,retryable:p}=await t(u,c,s);if(p){if(s.isCredentialsExpired=!!h,!(o!=null&&o.aborted)&&a<e){const f=n(a);await Os(f,o)}continue}else return l()}if(o!=null&&o.aborted)throw new Error("Request aborted.");return l()}},Os=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,o;const i=new Promise(s=>{o=s,n=setTimeout(s,e)});return t==null||t.addEventListener("abort",function s(r){clearTimeout(n),t==null||t.removeEventListener("abort",s),o()}),i},xn=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})},Fs=vi,ks=()=>e=>async function(n){return n.headers[Tn]||(n.headers[Tn]=Fs()),e(n)},Ls=({maxAttempts:e=Ao})=>(t,n)=>async function(i){const s=n.attemptsCount??0;return i.headers[Rs]=`attempt=${s+1}; max=${e}`,t(i)},Ks=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(i){if(t.trim().length===0)return await n(i);{const s=e.toLowerCase();return i.headers[s]=i.headers[s]?`${i.headers[s]} ${t}`:t,await n(i)}},Ot=(e,t)=>(n,o)=>{const i={};let s=r=>e(r,o);for(let r=t.length-1;r>=0;r--){const d=t[r];s=d(o)(s,i)}return s(n)},yt=e=>{let t;return()=>(t||(t=e()),t)},Ws=e=>!["HEAD","GET"].includes(e.toUpperCase()),Bs=async({url:e,method:t,headers:n,body:o},{abortSignal:i,cache:s,withCrossDomainCredentials:r})=>{var l;let d;try{d=await fetch(e,{method:t,headers:n,body:Ws(t)?o:void 0,signal:i,cache:s,credentials:r?"include":"same-origin"})}catch(h){throw h instanceof TypeError?new W({name:Ee.NetworkError,message:"A network error has occurred.",underlyingError:h}):h}const c={};(l=d.headers)==null||l.forEach((h,p)=>{c[p.toLowerCase()]=h});const a={statusCode:d.status,headers:c,body:null},u=Object.assign(d.body??{},{text:yt(()=>d.text()),blob:yt(()=>d.blob()),json:yt(()=>d.json())});return{...a,body:u}},Po=Ot(Bs,[Ks,ks,Ds,Ls]),qs=()=>e=>async function(n){return n.headers["cache-control"]="no-store",e(n)},No=Ot(Po,[qs]),Uo=e=>(t,n)=>{const o=Hs(e),i=JSON.stringify(t);return Vs(n,o,i)},Hs=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Vs=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),_n=e=>Y(No,Uo("GetCredentialsForIdentity"),$s,{..._o,...e,userAgentValue:ht()}),$s=async e=>{if(e.statusCode>=300)throw await be(e);const t=await $e(e);return{IdentityId:t.IdentityId,Credentials:Gs(t.Credentials),$metadata:pt(e)}},Gs=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(e*1e3)}),zs=e=>Y(No,Uo("GetId"),js,{..._o,...e,userAgentValue:ht()}),js=async e=>{if(e.statusCode>=300)throw await be(e);return{IdentityId:(await $e(e)).IdentityId,$metadata:pt(e)}},Mo={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Ys={partitions:[Mo,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},bo=e=>{const{partitions:t}=Ys;for(const{regions:n,outputs:o,regionRegex:i}of t){const s=new RegExp(i);if(n.includes(e)||s.test(e))return o.dnsSuffix}return Mo.outputs.dnsSuffix},Ge=URL,Js=({region:e})=>({url:new Ge(`https://${xo}.${e}.${bo(e)}`)});class We extends W{constructor(){super({name:Ee.PlatformNotSupported,message:"Function not supported on current platform"})}}class Do{constructor(t){this.storage=t}async setItem(t,n){if(!this.storage)throw new We;this.storage.setItem(t,n)}async getItem(t){if(!this.storage)throw new We;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new We;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new We;this.storage.clear()}}class Oo{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const Fo=new q("CoreStorageUtils"),Xs=()=>{try{if(typeof window<"u"&&window.localStorage)return window.localStorage}catch{Fo.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new Oo},ko=()=>{try{if(typeof window<"u"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch{return Fo.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new Oo}};class Qs extends Do{constructor(){super(Xs())}}class Zs extends Do{constructor(){super(ko())}}class er{constructor(t){this._storage=t}get storage(){if(!this._storage)throw new We;return this._storage}setItem(t,n){this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}}class tr extends er{constructor(){super(ko())}}/*! js-cookie v3.0.5 | MIT */function Xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var nr={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function At(e,t){function n(i,s,r){if(!(typeof document>"u")){r=Xe({},t,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var c in r)r[c]&&(d+="; "+c,r[c]!==!0&&(d+="="+r[c].split(";")[0]));return document.cookie=i+"="+e.write(s,i)+d}}function o(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],r={},d=0;d<s.length;d++){var c=s[d].split("="),a=c.slice(1).join("=");try{var u=decodeURIComponent(c[0]);if(r[u]=e.read(a,u),i===u)break}catch{}}return i?r[i]:r}}return Object.create({set:n,get:o,remove:function(i,s){n(i,"",Xe({},s,{expires:-1}))},withAttributes:function(i){return At(this.converter,Xe({},this.attributes,i))},withConverter:function(i){return At(Xe({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Qe=At(nr,{path:"/"});class or{constructor(t={}){const{path:n,domain:o,expires:i,sameSite:s,secure:r}=t;if(this.domain=o,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?i:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?r:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!s||!["strict","lax","none"].includes(s))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(s==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=s}}async setItem(t,n){Qe.set(t,n,this.getData())}async getItem(t){return Qe.get(t)??null}async removeItem(t){Qe.remove(t,this.getData())}async clear(){const t=Qe.get(),n=Object.keys(t).map(o=>this.removeItem(o));await Promise.all(n)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const ze=new Qs;new Zs;const ae=new tr,ir=e=>{let t;return async(...n)=>t||(t=new Promise((o,i)=>{e(...n).then(s=>{o(s)}).catch(s=>{i(s)}).finally(()=>{t=void 0})}),t)};function Pn({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}const sr=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:i="",fullVersionList:s=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=s.map(c=>`${c.brand}/${c.version}`).join(";");return[t,n,i,o,t,r].filter(c=>c).join(" ")||navigator.userAgent};function rr(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const Ve={convert(e,t={urlSafe:!1,skipPadding:!1}){const n=typeof e=="string"?e:rr(e);let o=ui()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}};function ar(){return di().getRandomValues(new Uint32Array(1))[0]}function cr(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let i=0;i<n;i++){const s=t[i>>>2]>>>24-i%4*8&255;o.push((s>>>4).toString(16)),o.push((s&15).toString(16))}return o.join("")}class Ft{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(ar());return new Ft(n,t)}toString(){return cr(this)}}var y;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(y||(y={}));const Lo={[y.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[y.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[y.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[y.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[y.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[y.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[y.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[y.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[y.EmptySignInPassword]:{message:"password is required to signIn"},[y.EmptySignInUsername]:{message:"username is required to signIn"},[y.EmptySignUpPassword]:{message:"password is required to signUp"},[y.EmptySignUpUsername]:{message:"username is required to signUp"},[y.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[y.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[y.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[y.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[y.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var Nn;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(Nn||(Nn={}));var ue;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(ue||(ue={}));class I extends W{constructor(t){super(t),this.constructor=I,Object.setPrototypeOf(this,I.prototype)}}function O(e,t){const{message:n,recoverySuggestion:o}=Lo[t];if(!e)throw new I({name:t,message:n,recoverySuggestion:o})}function C(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new I({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function Tt(e){if(!e||!e.includes(":"))throw new I({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function Un(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}var Mn;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(Mn||(Mn={}));var bn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(bn||(bn={}));var Dn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Dn||(Dn={}));var On;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(On||(On={}));var Fn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Fn||(Fn={}));var kn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(kn||(kn={}));var Ln;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ln||(Ln={}));var Kn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Kn||(Kn={}));var Wn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Wn||(Wn={}));var Bn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Bn||(Bn={}));var qn;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(qn||(qn={}));var Hn;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(Hn||(Hn={}));var Vn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Vn||(Vn={}));var $n;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})($n||($n={}));var ct;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ct||(ct={}));var Gn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Gn||(Gn={}));var zn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(zn||(zn={}));var jn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(jn||(jn={}));var Rt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(Rt||(Rt={}));var Yn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Yn||(Yn={}));var Jn;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Jn||(Jn={}));var Xn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Xn||(Xn={}));var Qn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Qn||(Qn={}));var Zn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Zn||(Zn={}));const ft="UserUnAuthenticatedException",dr="UserAlreadyAuthenticatedException",ur="DeviceMetadataNotFoundException",lr="InvalidRedirectException",hr="InvalidAppSchemeException",pr="InvalidPreferredRedirectUrlException",fr=new I({name:lr,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new I({name:hr,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new I({name:pr,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const gr="InvalidOriginException",Er=new I({name:gr,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),mr="OAuthSignOutException",Ir="TokenRefreshException",yr="UnexpectedSignInInterruptionException";function Sr(e){if(!e||!e.accessToken)throw new I({name:ft,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function wr(e){if(!e||!e.idToken)throw new I({name:ft,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const Cr=new I({name:Ir,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),vr=new I({name:ft,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function Ko(e){if(Rr(e))throw Cr;if(!Tr(e))throw vr}function Wo(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new I({name:ur,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const Ar={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Bo(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function Tr(e){return Bo(e)&&(e==null?void 0:e.refreshToken)}function Rr(e){return Bo(e)&&!(e!=null&&e.refreshToken)}const xr=async e=>{var d,c;const t=(d=e.getConfig().Auth)==null?void 0:d.Cognito;w(t);const n=await e.Auth.getTokens({forceRefresh:!1});Sr(n);const{"cognito:username":o,sub:i}=((c=n.idToken)==null?void 0:c.payload)??{},s={username:o,userId:i},r=_r(n);return r&&(s.signInDetails=r),s};function _r(e){return e==null?void 0:e.signInDetails}const qo=async()=>xr(T),U=(e,t)=>ht({category:Ct.Auth,action:e,...t}),oe=e=>(t,n)=>{const o=Pr(e),i=JSON.stringify(t);return Nr(n,o,i)},Pr=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),Nr=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function j(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new I({name:Ee.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const he=()=>async e=>{if(e.statusCode>=300){const t=await be(e);throw j(t),new I({name:t.name,message:t.message,metadata:t.$metadata})}return $e(e)},Ur=()=>(e,t)=>async function(o){return o.headers["cache-control"]="no-store",e(o)},ie=Ot(Po,[Ur]),Ho="cognito-idp",se={service:Ho,retryDecider:Ro(be),computeDelay:To,get userAgentValue(){return ht()},cache:"no-store"},je=e=>Y(ie,oe("InitiateAuth"),he(),{...se,...e}),H=e=>Y(ie,oe("RespondToAuthChallenge"),he(),{...se,...e}),Mr=e=>Y(ie,oe("VerifySoftwareToken"),he(),{...se,...e}),br=e=>Y(ie,oe("AssociateSoftwareToken"),he(),{...se,...e}),Dr=({region:e})=>({url:new Ge(`https://${Ho}.${e}.${bo(e)}`)}),v=({endpointOverride:e})=>t=>e?{url:new Ge(e)}:Dr(t),Or=e=>Y(ie,oe("GetTokensFromRefreshToken"),he(),{...se,...e}),Fr=async({tokens:e,authConfig:t,username:n})=>{var p;w(t==null?void 0:t.Cognito);const{userPoolId:o,userPoolClientId:i,userPoolEndpoint:s}=t.Cognito,r=C(o);Ko(e);const d=Or({endpointResolver:v({endpointOverride:s})}),{AuthenticationResult:c}=await d({region:r},{ClientId:i,RefreshToken:e.refreshToken,DeviceKey:(p=e.deviceMetadata)==null?void 0:p.deviceKey}),a=ve((c==null?void 0:c.AccessToken)??""),u=c!=null&&c.IdToken?ve(c.IdToken):void 0,{iat:l}=a.payload;if(!l)throw new I({name:"iatNotFoundException",message:"iat not found in access token"});const h=l*1e3-new Date().getTime();return{accessToken:a,idToken:u,clockDrift:h,refreshToken:(c==null?void 0:c.RefreshToken)??e.refreshToken,username:n}},kr=ir(Fr),Lr={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var dt;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(dt||(dt={}));const Kr={[dt.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},Wr=Ut(Kr),eo="CognitoIdentityServiceProvider";class Br{getKeyValueStorage(){if(!this.keyValueStorage)throw new I({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new I({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const o=ve(n),i=await this.getKeyValueStorage().getItem(t.idToken),s=i?ve(i):void 0,r=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,d=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",c=Number.parseInt(d),a=await this.getKeyValueStorage().getItem(t.signInDetails),u={accessToken:o,idToken:s,refreshToken:r,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:c,username:await this.getLastAuthUser()};return a&&(u.signInDetails=JSON.parse(a)),u}catch{return null}}async storeTokens(t){Wr(t!==void 0,dt.InvalidAuthTokens);const n=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,t.accessToken.toString()),t.idToken?await this.getKeyValueStorage().setItem(o.idToken,t.idToken.toString()):await this.getKeyValueStorage().removeItem(o.idToken),t.refreshToken?await this.getKeyValueStorage().setItem(o.refreshToken,t.refreshToken):await this.getKeyValueStorage().removeItem(o.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(t.signInDetails)):await this.getKeyValueStorage().removeItem(o.signInDetails),await this.getKeyValueStorage().setItem(o.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){const n=await this.getAuthKeys(t),o=await this.getKeyValueStorage().getItem(n.deviceKey),i=await this.getKeyValueStorage().getItem(n.deviceGroupKey),s=await this.getKeyValueStorage().getItem(n.randomPasswordKey);return s&&i&&o?{deviceKey:o,deviceGroupKey:i,randomPassword:s}:null}async clearDeviceMetadata(t){const n=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])}async getAuthKeys(t){var o;w((o=this.authConfig)==null?void 0:o.Cognito);const n=t??await this.getLastAuthUser();return qr(eo,`${this.authConfig.Cognito.userPoolClientId}.${n}`)}getLastAuthUserKey(){var n;w((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${eo}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){const{oauthMetadata:n}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n,JSON.stringify(t))}async getOAuthMetadata(){const{oauthMetadata:t}=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)}}const qr=(e,t)=>kt(Lr)(`${e}`,t);function kt(e){const t=Object.values({...e});return(n,o)=>t.reduce((i,s)=>({...i,[s]:`${n}.${o}.${s}`}),{})}const to="amplify-signin-with-hostedUI",Z="CognitoIdentityServiceProvider";class Vo{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){w(this.cognitoConfig);const t=ee(Z,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){w(this.cognitoConfig);const t=ee(Z,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(to),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){w(this.cognitoConfig);const t=ee(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){w(this.cognitoConfig);const n=ee(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){w(this.cognitoConfig);const t=ee(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){w(this.cognitoConfig);const n=ee(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){w(this.cognitoConfig);const t=ee(Z,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){w(this.cognitoConfig);const n=ee(Z,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)}async loadOAuthSignIn(){var s;w(this.cognitoConfig);const t=ee(Z,this.cognitoConfig.userPoolClientId),n=await this.keyValueStorage.getItem(to),[o,i]=((s=await this.keyValueStorage.getItem(t.oauthSignIn))==null?void 0:s.split(","))??[];return{isOAuthSignIn:o==="true"||n==="true",preferPrivateSession:i==="true"}}async storeOAuthSignIn(t,n=!1){w(this.cognitoConfig);const o=ee(Z,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(o.oauthSignIn,`${t},${n}`)}}const ee=(e,t)=>kt(Ar)(e,t),no=new Vo(ze);class Hr{constructor(){this.waitForInflightOAuth=Co()?async()=>{if(await no.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){no.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new I({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new I({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){var r,d,c,a,u;let n;try{w((r=this.authConfig)==null?void 0:r.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,n=await this.getTokenStore().loadTokens();const o=await this.getTokenStore().getLastAuthUser();if(n===null)return null;const i=!!(n!=null&&n.idToken)&&Pn({expiresAt:(((c=(d=n.idToken)==null?void 0:d.payload)==null?void 0:c.exp)??0)*1e3,clockDrift:n.clockDrift??0}),s=Pn({expiresAt:(((u=(a=n.accessToken)==null?void 0:a.payload)==null?void 0:u.exp)??0)*1e3,clockDrift:n.clockDrift??0});return(t!=null&&t.forceRefresh||i||s)&&(n=await this.refreshTokens({tokens:n,username:o}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}}async refreshTokens({tokens:t,username:n}){try{const{signInDetails:o}=t,i=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n});return i.signInDetails=o,await this.setTokens({tokens:i}),Ne.dispatch("auth",{event:"tokenRefresh"},"Auth",Ce),i}catch(o){return this.handleErrors(o)}}handleErrors(t){if(j(t),t.name!==Ee.NetworkError&&this.clearTokens(),Ne.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",Ce),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class Vr{constructor(){this.authTokenStore=new Br,this.authTokenStore.setKeyValueStorage(ze),this.tokenOrchestrator=new Hr,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(kr)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Be=new Vr,{tokenOrchestrator:V}=Be;async function Ae(e){if(e.AccessToken){const t=ve(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),i=n>0?n-o:0;let s,r,d;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=ve(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(d=e.NewDeviceMetadata);const c={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:d,username:e.username};e!=null&&e.signInDetails&&(c.signInDetails=e.signInDetails),await V.setTokens({tokens:c})}else throw new W({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const $r="Unable to get user session following successful sign-in.",Te=async()=>{try{Ne.dispatch("auth",{event:"signedIn",data:await qo()},"Auth",Ce)}catch(e){throw e.name===ft?new I({name:yr,message:$r,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};function $o(){return{active:!1}}const Gr=(e,t)=>{switch(t.type){case"SET_USERNAME":return{...e,username:t.value};case"SET_SESSION":return{...e,session:t.value};case"START":return{...e,active:!0};case"RESET":return $o();default:return e}},zr=e=>{let t=e($o(),{type:"RESET"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},fe=zr(Gr),jr=3*60*1e3,Ze="CognitoSignInState",ce={username:`${Ze}.username`,challengeName:`${Ze}.challengeName`,signInSession:`${Ze}.signInSession`,expiry:`${Ze}.expiry`},Yr=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return et({signInSession:t.value}),{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return et(t.value),{...t.value};case"SET_CHALLENGE_NAME":return et({challengeName:t.value}),{...e,challengeName:t.value};case"SET_USERNAME":return et({username:t.value}),{...e,username:t.value};case"SET_INITIAL_STATE":return Xr();case"RESET_STATE":return Go(),Lt();default:return e}},Jr=e=>{const t=Number(e),n=Date.now();return t<=n},J=()=>{ne.dispatch({type:"RESET_STATE"})},Go=()=>{for(const e of Object.values(ce))ae.removeItem(e)},Lt=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),Xr=()=>{const e=ae.getItem(ce.expiry);if(!e||Jr(e))return Go(),Lt();const t=ae.getItem(ce.username)??void 0,n=ae.getItem(ce.challengeName)??void 0,o=ae.getItem(ce.signInSession)??void 0;return{username:t,challengeName:n,signInSession:o}},Qr=e=>{let t=e(Lt(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},ne=Qr(Yr);function Re(e){ne.dispatch({type:"SET_SIGN_IN_STATE",value:e})}const et=({challengeName:e,signInSession:t,username:n})=>{n&&ae.setItem(ce.username,n),e&&ae.setItem(ce.challengeName,e),t&&(ae.setItem(ce.signInSession,t),ae.setItem(ce.expiry,String(Date.now()+jr)))};class de extends W{constructor(t){super(t),this.constructor=de,Object.setPrototypeOf(this,de.prototype)}}var _;(function(e){e.PasskeyNotSupported="PasskeyNotSupported",e.PasskeyAlreadyExists="PasskeyAlreadyExists",e.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",e.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",e.RelyingPartyMismatch="RelyingPartyMismatch",e.PasskeyRegistrationFailed="PasskeyRegistrationFailed",e.PasskeyRetrievalFailed="PasskeyRetrievalFailed",e.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",e.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",e.PasskeyOperationAborted="PasskeyOperationAborted"})(_||(_={}));const oo="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.",St="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",io="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",ut={[_.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:oo},[_.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:io},[_.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:io},[_.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:oo},[_.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[_.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[_.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:St},[_.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:St},[_.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:St},[_.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},Kt=Ut(ut,de),Zr=e=>{if(e instanceof de)return e;if(e instanceof Error&&e.name==="NotAllowedError"){const{message:t,recoverySuggestion:n}=ut[_.PasskeyAuthenticationCanceled];return new de({name:_.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return ea(e)},ea=e=>{if(e instanceof Error){if(e.name==="AbortError"){const{message:t,recoverySuggestion:n}=ut[_.PasskeyOperationAborted];return new de({name:_.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if(e.name==="SecurityError"){const{message:t,recoverySuggestion:n}=ut[_.RelyingPartyMismatch];return new de({name:_.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new de({name:Ee.Unknown,message:"An unknown error has occurred.",underlyingError:e})},ta=()=>Co()&&window.isSecureContext&&"credentials"in navigator&&typeof window.PublicKeyCredential=="function",Ke=e=>Ve.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0}),so=e=>Uint8Array.from(Mt.convert(e,{urlSafe:!0}),t=>t.charCodeAt(0)).buffer,na=e=>{const t=so(e.challenge),n=(e.allowCredentials||[]).map(o=>({...o,id:so(o.id)}));return{...e,challenge:t,allowCredentials:n}},oa=e=>{const t={clientDataJSON:Ke(e.response.clientDataJSON),authenticatorData:Ke(e.response.authenticatorData),signature:Ke(e.response.signature)};e.response.userHandle&&(t.userHandle=Ke(e.response.userHandle));const n={id:e.id,rawId:Ke(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n};function ia(e){Kt(e&&e instanceof PublicKeyCredential&&e.response instanceof AuthenticatorAssertionResponse,_.PasskeyRetrievalFailed)}const sa=async e=>{try{const t=ta();Kt(t,_.PasskeyNotSupported);const n=na(e),o=await navigator.credentials.get({publicKey:n});return ia(o),oa(o)}catch(t){throw Zr(t)}},ra=e=>Y(ie,oe("ConfirmDevice"),he(),{...se,...e}),it={convert(e){return new TextEncoder().encode(e)}};function g(e,t){e!=null&&this.fromString(e,t)}function L(){return new g(null,null)}let ge;const aa=0xdeadbeefcafe,ro=(aa&16777215)===15715070;function ca(e,t,n,o,i,s){for(;--s>=0;){const r=t*this[e++]+n[o]+i;i=Math.floor(r/67108864),n[o++]=r&67108863}return i}function da(e,t,n,o,i,s){const r=t&32767,d=t>>15;for(;--s>=0;){let c=this[e]&32767;const a=this[e++]>>15,u=d*c+a*r;c=r*c+((u&32767)<<15)+n[o]+(i&1073741823),i=(c>>>30)+(u>>>15)+d*a+(i>>>30),n[o++]=c&1073741823}return i}function ua(e,t,n,o,i,s){const r=t&16383,d=t>>14;for(;--s>=0;){let c=this[e]&16383;const a=this[e++]>>14,u=d*c+a*r;c=r*c+((u&16383)<<14)+n[o]+i,i=(c>>28)+(u>>14)+d*a,n[o++]=c&268435455}return i}const ao=typeof navigator<"u";ao&&ro&&navigator.appName==="Microsoft Internet Explorer"?(g.prototype.am=da,ge=30):ao&&ro&&navigator.appName!=="Netscape"?(g.prototype.am=ca,ge=26):(g.prototype.am=ua,ge=28);g.prototype.DB=ge;g.prototype.DM=(1<<ge)-1;g.prototype.DV=1<<ge;const Wt=52;g.prototype.FV=Math.pow(2,Wt);g.prototype.F1=Wt-ge;g.prototype.F2=2*ge-Wt;const la="0123456789abcdefghijklmnopqrstuvwxyz",gt=[];let De,z;De=48;for(z=0;z<=9;++z)gt[De++]=z;De=97;for(z=10;z<36;++z)gt[De++]=z;De=65;for(z=10;z<36;++z)gt[De++]=z;function co(e){return la.charAt(e)}function ha(e,t){const n=gt[e.charCodeAt(t)];return n??-1}function pa(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function fa(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Bt(e){const t=L();return t.fromInt(e),t}function ga(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,i=!1,s=0;for(;--o>=0;){const r=ha(e,o);if(r<0){e.charAt(o)==="-"&&(i=!0);continue}i=!1,s===0?this[this.t++]=r:s+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-s)-1)<<s,this[this.t++]=r>>this.DB-s):this[this.t-1]|=r<<s,s+=n,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&g.ZERO.subTo(this,this)}function Ea(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function ma(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,i=!1,s="",r=this.t,d=this.DB-r*this.DB%t;if(r-- >0)for(d<this.DB&&(o=this[r]>>d)>0&&(i=!0,s=co(o));r>=0;)d<t?(o=(this[r]&(1<<d)-1)<<t-d,o|=this[--r]>>(d+=this.DB-t)):(o=this[r]>>(d-=t)&n,d<=0&&(d+=this.DB,--r)),o>0&&(i=!0),i&&(s+=co(o));return i?s:"0"}function Ia(){const e=L();return g.ZERO.subTo(this,e),e}function ya(){return this.s<0?this.negate():this}function Sa(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function qt(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function wa(){return this.t<=0?0:this.DB*(this.t-1)+qt(this[this.t-1]^this.s&this.DM)}function Ca(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function va(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Aa(e,t){const n=e%this.DB,o=this.DB-n,i=(1<<o)-1,s=Math.floor(e/this.DB);let r=this.s<<n&this.DM,d;for(d=this.t-1;d>=0;--d)t[d+s+1]=this[d]>>o|r,r=(this[d]&i)<<n;for(d=s-1;d>=0;--d)t[d]=0;t[s]=r,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Ta(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,i=this.DB-o,s=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&s)<<i,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function Ra(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function xa(e,t){const n=this.abs(),o=e.abs();let i=n.t;for(t.t=i+o.t;--i>=0;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&g.ZERO.subTo(t,t)}function _a(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Pa(e,t,n){const o=e.abs();if(o.t<=0)return;const i=this.abs();if(i.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=L());const s=L(),r=this.s,d=e.s,c=this.DB-qt(o[o.t-1]);c>0?(o.lShiftTo(c,s),i.lShiftTo(c,n)):(o.copyTo(s),i.copyTo(n));const a=s.t,u=s[a-1];if(u===0)return;const l=u*(1<<this.F1)+(a>1?s[a-2]>>this.F2:0),h=this.FV/l,p=(1<<this.F1)/l,f=1<<this.F2;let E=n.t,m=E-a;const S=t===null?L():t;for(s.dlShiftTo(m,S),n.compareTo(S)>=0&&(n[n.t++]=1,n.subTo(S,n)),g.ONE.dlShiftTo(a,S),S.subTo(s,s);s.t<a;)s[s.t++]=0;for(;--m>=0;){let P=n[--E]===u?this.DM:Math.floor(n[E]*h+(n[E-1]+f)*p);if((n[E]+=s.am(0,P,n,m,0,a))<P)for(s.dlShiftTo(m,S),n.subTo(S,n);n[E]<--P;)n.subTo(S,n)}t!==null&&(n.drShiftTo(a,t),r!==d&&g.ZERO.subTo(t,t)),n.t=a,n.clamp(),c>0&&n.rShiftTo(c,n),r<0&&g.ZERO.subTo(n,n)}function Na(e){const t=L();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(g.ZERO)>0&&e.subTo(t,t),t}function Ua(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ma(e){return this.compareTo(e)===0}function ba(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function Da(e){const t=L();return this.addTo(e,t),t}function Oa(e){const t=L();return this.subTo(e,t),t}function Fa(e){const t=L();return this.multiplyTo(e,t),t}function ka(e){const t=L();return this.divRemTo(e,t,null),t}function Oe(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function La(e){const t=L();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(g.ZERO)>0&&this.m.subTo(t,t),t}function Ka(e){const t=L();return e.copyTo(t),this.reduce(t),t}function Wa(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Ba(e,t){e.squareTo(t),this.reduce(t)}function qa(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Oe.prototype.convert=La;Oe.prototype.revert=Ka;Oe.prototype.reduce=Wa;Oe.prototype.mulTo=qa;Oe.prototype.sqrTo=Ba;function Ha(e,t,n){let o=e.bitLength(),i,s=Bt(1);const r=new Oe(t);if(o<=0)return s;o<18?i=1:o<48?i=3:o<144?i=4:o<768?i=5:i=6;const d=[];let c=3;const a=i-1,u=(1<<i)-1;if(d[1]=r.convert(this),i>1){const S=L();for(r.sqrTo(d[1],S);c<=u;)d[c]=L(),r.mulTo(S,d[c-2],d[c]),c+=2}let l=e.t-1,h,p=!0,f=L(),E;for(o=qt(e[l])-1;l>=0;){for(o>=a?h=e[l]>>o-a&u:(h=(e[l]&(1<<o+1)-1)<<a-o,l>0&&(h|=e[l-1]>>this.DB+o-a)),c=i;!(h&1);)h>>=1,--c;if((o-=c)<0&&(o+=this.DB,--l),p)d[h].copyTo(s),p=!1;else{for(;c>1;)r.sqrTo(s,f),r.sqrTo(f,s),c-=2;c>0?r.sqrTo(s,f):(E=s,s=f,f=E),r.mulTo(f,d[h],s)}for(;l>=0&&!(e[l]&1<<o);)r.sqrTo(s,f),E=s,s=f,f=E,--o<0&&(o=this.DB-1,--l)}const m=r.revert(s);return n(null,m),m}g.prototype.copyTo=pa;g.prototype.fromInt=fa;g.prototype.fromString=ga;g.prototype.clamp=Ea;g.prototype.dlShiftTo=Ca;g.prototype.drShiftTo=va;g.prototype.lShiftTo=Aa;g.prototype.rShiftTo=Ta;g.prototype.subTo=Ra;g.prototype.multiplyTo=xa;g.prototype.squareTo=_a;g.prototype.divRemTo=Pa;g.prototype.invDigit=Ua;g.prototype.addTo=ba;g.prototype.toString=ma;g.prototype.negate=Ia;g.prototype.abs=ya;g.prototype.compareTo=Sa;g.prototype.bitLength=wa;g.prototype.mod=Na;g.prototype.equals=Ma;g.prototype.add=Da;g.prototype.subtract=Oa;g.prototype.multiply=Fa;g.prototype.divide=ka;g.prototype.modPow=Ha;g.ZERO=Bt(0);g.ONE=Bt(1);const Va=async({a:e,g:t,k:n,x:o,B:i,N:s,U:r})=>new Promise((d,c)=>{t.modPow(o,s,(a,u)=>{if(a){c(a);return}i.subtract(n.multiply(u)).modPow(e.add(r.multiply(o)),s,(l,h)=>{if(l){c(l);return}d(h.mod(s))})})}),$a="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",zo={},xt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),zo[e]=t,xt[t]=e}const Ue=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in xt)t[n/2]=xt[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},Ht=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=zo[e[n]];return t},_t=e=>{const t=new at;t.update(e);const n=t.digestSync(),o=Ht(n);return new Array(64-o.length).join("0")+o},st=e=>_t(Ue(e)),Ga=/^[89a-f]/i,re=e=>{if(!(e instanceof g))throw new Error("Not a BigInteger");const t=e.compareTo(g.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=Ga.test(n)?`00${n}`:n,t){const o=n.split("").map(s=>{const r=~parseInt(s,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new g(o,16).add(g.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},za=({A:e,B:t})=>{const n=new g(st(re(e)+re(t)),16);if(n.equals(g.ZERO))throw new Error("U cannot be zero.");return n},ja=(e,t,n)=>{const o=new at(t);o.update(e);const i=o.digestSync(),s=new at(i);return s.update(n),s.digestSync().slice(0,16)},Vt=e=>{const t=new Ft().random(e).toString();return Ue(t)},Ya=()=>Ve.convert(Vt(40));class Ja{constructor({userPoolName:t,a:n,g:o,A:i,N:s}){this.encoder=it,this.userPoolName=t,this.a=n,this.g=o,this.A=i,this.N=s,this.k=new g(st(`${re(s)}${re(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new I({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new I({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new I({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=Ya();const o=`${t}${n}:${this.randomPassword}`,i=_t(o),s=Ht(Vt(16));return this.saltToHashDevices=re(new g(s,16)),new Promise((r,d)=>{this.g.modPow(new g(st(this.saltToHashDevices+i),16),this.N,(c,a)=>{if(c){d(c);return}this.verifierDevices=re(a),r()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:i}){if(o.mod(this.N).equals(g.ZERO))throw new Error("B cannot be zero.");const s=za({A:this.A,B:o}),r=`${this.userPoolName}${t}:${n}`,d=_t(r),c=new g(st(re(i)+d),16),a=await Va({a:this.a,g:this.g,k:this.k,x:c,B:o,N:this.N,U:s}),u=this.encoder.convert("Caldera Derived Key"),l=this.encoder.convert(""),h=new Uint8Array(u.byteLength+l.byteLength);return h.set(u,0),h.set(l,u.byteLength),ja(Ue(re(a)),Ue(re(s)),h)}}const Xa=async({a:e,g:t,N:n})=>new Promise((o,i)=>{t.modPow(e,n,(s,r)=>{if(s){i(s);return}if(r.mod(n).equals(g.ZERO)){i(new Error("Illegal parameter. A mod N cannot be 0."));return}o(r)})}),Ye=async e=>{const t=new g($a,16),n=new g("2",16),o=Qa(),i=await Xa({a:o,g:n,N:t});return new Ja({userPoolName:e,a:o,g:n,A:i,N:t})},Qa=()=>{const e=Ht(Vt(128));return new g(e,16)};async function xe({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:o}){if(!n)return;const i=e.split("_")[1]||"",s=await Ye(i),r=n==null?void 0:n.DeviceKey,d=n==null?void 0:n.DeviceGroupKey;try{await s.generateHashDevice(d??"",r??"")}catch{return}const c={Salt:Ve.convert(Ue(s.getSaltToHashDevices())),PasswordVerifier:Ve.convert(Ue(s.getVerifierDevices()))},a=s.getRandomPassword();try{return await ra({endpointResolver:v({endpointOverride:t})})({region:C(e)},{AccessToken:o,DeviceName:await sr(),DeviceKey:n==null?void 0:n.DeviceKey,DeviceSecretVerifierConfig:c}),{deviceKey:r,deviceGroupKey:d,randomPassword:a}}catch{return}}async function Za(e){var p;const t=(p=T.getConfig().Auth)==null?void 0:p.Cognito;w(t);const{username:n,signInSession:o,signInDetails:i,challengeName:s}=ne.getState();if(s!=="WEB_AUTHN"||!n)throw new I({name:ue.SignInException,message:"Unable to proceed due to invalid sign in state."});const{CREDENTIAL_REQUEST_OPTIONS:r}=e;Kt(!!r,_.InvalidPasskeyAuthenticationOptions);const d=await sa(JSON.parse(r)),c=H({endpointResolver:v({endpointOverride:t.userPoolEndpoint})}),{ChallengeName:a,ChallengeParameters:u,AuthenticationResult:l,Session:h}=await c({region:C(t.userPoolId),userAgentValue:U(R.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:n,CREDENTIAL:JSON.stringify(d)},ClientId:t.userPoolClientId,Session:o});if(Re({signInSession:h,username:n,challengeName:a,signInDetails:i}),l)return await Ae({...l,username:n,NewDeviceMetadata:await xe({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:l.NewDeviceMetadata,accessToken:l.AccessToken}),signInDetails:i}),ne.dispatch({type:"RESET_STATE"}),await Te(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if(a==="WEB_AUTHN")throw new I({name:ue.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:a,challengeParameters:u}}function F({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;const o=window.AmazonCognitoAdvancedSecurityData;if(typeof o>"u")return;const i=o.getData(e,t,n);return i?{EncodedData:i}:{}}const ec=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],jo=()=>{const e=new Date,t=tc[e.getUTCDay()],n=ec[e.getUTCMonth()],o=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const d=e.getUTCFullYear();return`${t} ${n} ${o} ${i}:${s}:${r} UTC ${d}`},Yo=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:i})=>{const s=it.convert(e),r=it.convert(t),d=nc(n.SECRET_BLOCK),c=it.convert(o),a=new Uint8Array(s.byteLength+r.byteLength+d.byteLength+c.byteLength);a.set(s,0),a.set(r,s.byteLength),a.set(d,s.byteLength+r.byteLength),a.set(c,s.byteLength+r.byteLength+d.byteLength);const u=new at(i);u.update(a);const l=u.digestSync();return Ve.convert(l)},nc=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=Mt.convert(n),i=new Uint8Array(o.length);for(let s=0;s<o.length;++s)i[s]=o.charCodeAt(s);return i};async function Et({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:i}){const{userPoolId:s,userPoolEndpoint:r}=t,d=t.userPoolClientId,c=await(i==null?void 0:i.getDeviceMetadata(e));Wo(c);const a=await Ye(c.deviceGroupKey),u={USERNAME:e,SRP_A:a.A.toString(16),DEVICE_KEY:c.deviceKey},l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:d,ChallengeResponses:u,ClientMetadata:n,Session:o},h=H({endpointResolver:v({endpointOverride:r})}),{ChallengeParameters:p,Session:f}=await h({region:C(s)},l);return oc(e,p,n,f,a,t,i)}async function oc(e,t,n,o,i,{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d},c){const a=await(c==null?void 0:c.getDeviceMetadata(e));Wo(a);const u=new g(t==null?void 0:t.SRP_B,16),l=new g(t==null?void 0:t.SALT,16),{deviceKey:h}=a,{deviceGroupKey:p}=a,f=await i.getPasswordAuthenticationKey({username:a.deviceKey,password:a.randomPassword,serverBValue:u,salt:l}),E=jo(),m={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:E,PASSWORD_CLAIM_SIGNATURE:Yo({username:h,userPoolName:p,challengeParameters:t,dateNow:E,hkdf:f}),DEVICE_KEY:h},S=F({username:e,userPoolId:s,userPoolClientId:r}),P={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:m,Session:o,ClientMetadata:n,UserContextData:S};return H({endpointResolver:v({endpointOverride:d})})({region:C(s)},P)}async function $t(e,t,n,o,i,s,r){const{userPoolId:d,userPoolClientId:c,userPoolEndpoint:a}=s,u=(d==null?void 0:d.split("_")[1])||"",l=new g(t==null?void 0:t.SRP_B,16),h=new g(t==null?void 0:t.SALT,16),p=t==null?void 0:t.USER_ID_FOR_SRP;if(!p)throw new I({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const f=await i.getPasswordAuthenticationKey({username:p,password:e,serverBValue:l,salt:h}),E=jo(),m={USERNAME:p,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:E,PASSWORD_CLAIM_SIGNATURE:Yo({username:p,userPoolName:u,challengeParameters:t,dateNow:E,hkdf:f})},S=await r.getDeviceMetadata(p);S&&S.deviceKey&&(m.DEVICE_KEY=S.deviceKey);const P=F({username:p,userPoolId:d,userPoolClientId:c}),K={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:m,ClientMetadata:n,Session:o,ClientId:c,UserContextData:P},A=await H({endpointResolver:v({endpointOverride:a})})({region:C(d)},K);return A.ChallengeName==="DEVICE_SRP_AUTH"?Et({username:p,config:s,clientMetadata:n,session:A.Session,tokenOrchestrator:r}):A}async function Fe(e,t,n,o){try{return await e(...t)}catch(i){if(i instanceof I&&i.name==="ResourceNotFoundException"&&i.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw i}}function _e(e){const{dispatch:t}=ne;t({type:"SET_USERNAME",value:e})}async function Jo({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:s,preferredChallenge:r}){const{userPoolId:d,userPoolClientId:c,userPoolEndpoint:a}=o,u=(d==null?void 0:d.split("_")[1])||"",l=await Ye(u),h={USERNAME:e,SRP_A:l.A.toString(16)};s==="USER_AUTH"&&r&&(h.PREFERRED_CHALLENGE=r);const p=F({username:e,userPoolId:d,userPoolClientId:c}),f={AuthFlow:s,AuthParameters:h,ClientMetadata:n,ClientId:c,UserContextData:p},m=await je({endpointResolver:v({endpointOverride:a})})({region:C(d),userAgentValue:U(R.SignIn)},f),{ChallengeParameters:S,Session:P}=m,K=(S==null?void 0:S.USERNAME)??e;return _e(K),m.ChallengeName==="PASSWORD_VERIFIER"?Fe($t,[t,S,n,P,l,o,i],K,i):m}async function ic({username:e,session:t,selectedChallenge:n,config:o,clientMetadata:i}){return H({endpointResolver:v({endpointOverride:o.userPoolEndpoint})})({region:C(o.userPoolId),userAgentValue:U(R.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:{USERNAME:e,ANSWER:n},ClientId:o.userPoolClientId,Session:t,ClientMetadata:i})}async function sc(e,t,n,o,i){var p;const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d}=o,c={ANSWER:"PASSWORD",USERNAME:e,PASSWORD:t},a=F({username:e,userPoolId:s,userPoolClientId:r}),l=await H({endpointResolver:v({endpointOverride:d})})({region:C(s),userAgentValue:U(R.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:c,ClientId:r,ClientMetadata:n,Session:i,UserContextData:a}),h=((p=l.ChallengeParameters)==null?void 0:p.USERNAME)??e;return _e(h),l}async function rc(e,t,n,o,i,s){var m;const{userPoolId:r,userPoolClientId:d,userPoolEndpoint:c}=o,a=r.split("_")[1]||"",u=await Ye(a),l={ANSWER:"PASSWORD_SRP",USERNAME:e,SRP_A:u.A.toString(16)},h=F({username:e,userPoolId:r,userPoolClientId:d}),f=await H({endpointResolver:v({endpointOverride:c})})({region:C(r),userAgentValue:U(R.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:l,ClientId:d,ClientMetadata:n,Session:i,UserContextData:h}),E=((m=f.ChallengeParameters)==null?void 0:m.USERNAME)??e;return _e(E),f.ChallengeName==="PASSWORD_VERIFIER"?Fe($t,[t,f.ChallengeParameters,n,f.Session,u,o,s],E,s):f}const Pt="userAttributes.";function ac(e){return"isSignedIn"in e&&"nextStep"in e}async function cc({challengeResponse:e,clientMetadata:t,session:n,username:o,config:i,tokenOrchestrator:s}){const{userPoolId:r,userPoolClientId:d,userPoolEndpoint:c}=i,a={USERNAME:o,ANSWER:e},u=await(s==null?void 0:s.getDeviceMetadata(o));u&&u.deviceKey&&(a.DEVICE_KEY=u.deviceKey);const l=F({username:o,userPoolId:r,userPoolClientId:d}),h={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:a,Session:n,ClientMetadata:t,ClientId:d,UserContextData:l},f=await H({endpointResolver:v({endpointOverride:c})})({region:C(r),userAgentValue:U(R.ConfirmSignIn)},h);return f.ChallengeName==="DEVICE_SRP_AUTH"?Et({username:o,config:i,clientMetadata:t,session:f.Session,tokenOrchestrator:s}):f}async function dc({challengeResponse:e,username:t,clientMetadata:n,session:o,deviceName:i,config:s}){const{userPoolId:r,userPoolClientId:d,userPoolEndpoint:c}=s;if(e==="EMAIL")return{ChallengeName:"MFA_SETUP",Session:o,ChallengeParameters:{MFAS_CAN_SETUP:'["EMAIL_OTP"]'},$metadata:{}};if(e==="TOTP")return{ChallengeName:"MFA_SETUP",Session:o,ChallengeParameters:{MFAS_CAN_SETUP:'["SOFTWARE_TOKEN_MFA"]'},$metadata:{}};const a={USERNAME:t};if(/^\d+$/.test(e)){const h=Mr({endpointResolver:v({endpointOverride:c})}),{Session:p}=await h({region:C(r),userAgentValue:U(R.ConfirmSignIn)},{UserCode:e,Session:o,FriendlyDeviceName:i});ne.dispatch({type:"SET_SIGN_IN_SESSION",value:p});const f={ChallengeName:"MFA_SETUP",ChallengeResponses:a,Session:p,ClientMetadata:n,ClientId:d};return H({endpointResolver:v({endpointOverride:c})})({region:C(r),userAgentValue:U(R.ConfirmSignIn)},f)}if(e.includes("@")){a.EMAIL=e;const h={ChallengeName:"MFA_SETUP",ChallengeResponses:a,Session:o,ClientMetadata:n,ClientId:d};return H({endpointResolver:v({endpointOverride:c})})({region:C(r),userAgentValue:U(R.ConfirmSignIn)},h)}throw new I({name:ue.SignInException,message:`Cannot proceed with MFA setup using challengeResponse: ${e}`,recoverySuggestion:'Try passing "EMAIL", "TOTP", a valid email, or OTP code as the challengeResponse.'})}async function uc({challengeResponse:e,username:t,clientMetadata:n,session:o,config:i}){const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d}=i;O(e==="TOTP"||e==="SMS"||e==="EMAIL",y.IncorrectMFAMethod);const c={USERNAME:t,ANSWER:Sc(e)},a=F({username:t,userPoolId:s,userPoolClientId:r}),u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:c,Session:o,ClientMetadata:n,ClientId:r,UserContextData:a};return H({endpointResolver:v({endpointOverride:d})})({region:C(s),userAgentValue:U(R.ConfirmSignIn)},u)}async function lc({challengeResponse:e,clientMetadata:t,session:n,username:o,requiredAttributes:i,config:s}){const{userPoolId:r,userPoolClientId:d,userPoolEndpoint:c}=s,a={...Ic(i),NEW_PASSWORD:e,USERNAME:o},u=F({username:o,userPoolId:r,userPoolClientId:d}),l={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:a,ClientMetadata:t,Session:n,ClientId:d,UserContextData:u};return H({endpointResolver:v({endpointOverride:c})})({region:C(r),userAgentValue:U(R.ConfirmSignIn)},l)}async function hc(e,t,n,o,i){var E,m;const{userPoolClientId:s,userPoolId:r,userPoolEndpoint:d}=o,c={USERNAME:e,PASSWORD:t},a=await i.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const u=F({username:e,userPoolId:r,userPoolClientId:s}),l={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:c,ClientMetadata:n,ClientId:s,UserContextData:u},p=await je({endpointResolver:v({endpointOverride:d})})({region:C(r),userAgentValue:U(R.SignIn)},l),f=((E=p.ChallengeParameters)==null?void 0:E.USERNAME)??((m=p.ChallengeParameters)==null?void 0:m.USER_ID_FOR_SRP)??e;return _e(f),p.ChallengeName==="DEVICE_SRP_AUTH"?Et({username:f,config:o,clientMetadata:n,session:p.Session,tokenOrchestrator:i}):p}async function pc(e,t,n,o,i){return Jo({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:"USER_SRP_AUTH"})}async function fc(e,t,n,o){var f;const{userPoolClientId:i,userPoolId:s,userPoolEndpoint:r}=n,d={USERNAME:e},c=await o.getDeviceMetadata(e);c&&c.deviceKey&&(d.DEVICE_KEY=c.deviceKey);const a=F({username:e,userPoolId:s,userPoolClientId:i}),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:d,ClientMetadata:t,ClientId:i,UserContextData:a},h=await je({endpointResolver:v({endpointOverride:r})})({region:C(s),userAgentValue:U(R.SignIn)},u),p=((f=h.ChallengeParameters)==null?void 0:f.USERNAME)??e;return _e(p),h.ChallengeName==="DEVICE_SRP_AUTH"?Et({username:p,config:n,clientMetadata:t,session:h.Session,tokenOrchestrator:o}):h}async function gc(e,t,n,o,i){w(o);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d}=o,c=(s==null?void 0:s.split("_")[1])||"",a=await Ye(c),u={USERNAME:e,SRP_A:a.A.toString(16),CHALLENGE_NAME:"SRP_A"},l=F({username:e,userPoolId:s,userPoolClientId:r}),h={AuthFlow:"CUSTOM_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:l},p=je({endpointResolver:v({endpointOverride:d})}),{ChallengeParameters:f,Session:E}=await p({region:C(s),userAgentValue:U(R.SignIn)},h),m=(f==null?void 0:f.USERNAME)??e;return _e(m),Fe($t,[t,f,n,E,a,o,i],m,i)}async function Pe(e){var s;const{challengeName:t,challengeParameters:n,availableChallenges:o}=e,i=(s=T.getConfig().Auth)==null?void 0:s.Cognito;switch(w(i),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:r,username:d}=ne.getState(),c=uo(lo(n.MFAS_CAN_SETUP))||[],a=Cc(c),u=a.includes("TOTP"),l=a.includes("EMAIL");if(u&&l)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:a}};if(l)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(u){const h=br({endpointResolver:v({endpointOverride:i.userPoolEndpoint})}),{Session:p,SecretCode:f}=await h({region:C(i.userPoolId)},{Session:r});return ne.dispatch({type:"SET_SIGN_IN_SESSION",value:p}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Ec(f,d)}}}throw new I({name:ue.SignInException,message:`Cannot initiate MFA setup from available types: ${c}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:mc(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:uo(lo(n.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{const r=await Za(n);return ac(r)?r:Pe(r)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:o}}}throw new I({name:ue.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function Ec(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const i=`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`;return new Ge(i)}}}function ke(e){if(e===ct.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===ct.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function mc(e){return e?JSON.parse(e).map(n=>n.includes(Pt)?n.replace(Pt,""):n):[]}function Ic(e){if(!e)return{};const t={};return Object.entries(e).forEach(([n,o])=>{o&&(t[`${Pt}${n}`]=o)}),t}async function yc(e,t,n,o,i,s,r,d){const c=d==null?void 0:d.userAttributes,a=d==null?void 0:d.friendlyDeviceName;switch(t){case"WEB_AUTHN":case"SELECT_CHALLENGE":return o==="PASSWORD_SRP"||o==="PASSWORD"?{ChallengeName:o,Session:n,$metadata:{}}:ic({username:e,session:n,selectedChallenge:o,config:i,clientMetadata:r});case"SELECT_MFA_TYPE":return uc({challengeResponse:o,clientMetadata:r,session:n,username:e,config:i});case"MFA_SETUP":return dc({challengeResponse:o,clientMetadata:r,session:n,username:e,deviceName:a,config:i});case"NEW_PASSWORD_REQUIRED":return lc({challengeResponse:o,clientMetadata:r,session:n,username:e,requiredAttributes:c,config:i});case"CUSTOM_CHALLENGE":return Fe(cc,[{challengeResponse:o,clientMetadata:r,session:n,username:e,config:i,tokenOrchestrator:s}],e,s);case"SMS_MFA":case"SOFTWARE_TOKEN_MFA":case"SMS_OTP":case"EMAIL_OTP":return Ac({challengeName:t,challengeResponse:o,clientMetadata:r,session:n,username:e,config:i});case"PASSWORD":return sc(e,o,r,i,n);case"PASSWORD_SRP":return rc(e,o,r,i,n,s)}throw new I({name:ue.SignInException,message:`An error occurred during the sign in process.
		${t} challengeName returned by the underlying service was not addressed.`})}function Sc(e){let t="SMS_MFA";return e==="TOTP"&&(t="SOFTWARE_TOKEN_MFA"),e==="EMAIL"&&(t="EMAIL_OTP"),t}function wc(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP";if(e==="EMAIL_OTP")return"EMAIL"}function uo(e){if(e)return e.map(wc).filter(Boolean)}function lo(e){return e?JSON.parse(e):[]}function Cc(e){return e.filter(t=>t==="EMAIL"||t==="TOTP")}async function vc(){let e;try{e=await qo()}catch{}if(e&&e.userId&&e.username)throw new I({name:dr,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}function Je(e){return ne.getState().username??e}async function Ac({challengeName:e,challengeResponse:t,clientMetadata:n,session:o,username:i,config:s}){const{userPoolId:r,userPoolClientId:d,userPoolEndpoint:c}=s,a={USERNAME:i};e==="EMAIL_OTP"&&(a.EMAIL_OTP_CODE=t),e==="SMS_MFA"&&(a.SMS_MFA_CODE=t),e==="SMS_OTP"&&(a.SMS_OTP_CODE=t),e==="SOFTWARE_TOKEN_MFA"&&(a.SOFTWARE_TOKEN_MFA_CODE=t);const u=F({username:i,userPoolId:r,userPoolClientId:d}),l={ChallengeName:e,ChallengeResponses:a,Session:o,ClientMetadata:n,ClientId:d,UserContextData:u};return H({endpointResolver:v({endpointOverride:c})})({region:C(r),userAgentValue:U(R.ConfirmSignIn)},l)}async function Tc(e){var d;const t=(d=T.getConfig().Auth)==null?void 0:d.Cognito;w(t);const{username:n,password:o,options:i}=e,s={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i==null?void 0:i.clientMetadata;O(!!n,y.EmptySignInUsername),O(!o,y.CustomAuthSignInPassword);try{const{ChallengeName:c,ChallengeParameters:a,AuthenticationResult:u,Session:l}=await Fe(fc,[n,r,t,V],n,V),h=Je(n);return Re({signInSession:l,username:h,challengeName:c,signInDetails:s}),u?(await Ae({username:h,...u,NewDeviceMetadata:await xe({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),J(),await Te(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Pe({challengeName:c,challengeParameters:a})}catch(c){J(),j(c);const a=ke(c.name);if(a)return a;throw c}}async function Rc(e){var d;const{username:t,password:n,options:o}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=(d=T.getConfig().Auth)==null?void 0:d.Cognito;w(s);const r=o==null?void 0:o.clientMetadata;O(!!t,y.EmptySignInUsername),O(!!n,y.EmptySignInPassword);try{const{ChallengeName:c,ChallengeParameters:a,AuthenticationResult:u,Session:l}=await gc(t,n,r,s,V),h=Je(t);return Re({signInSession:l,username:h,challengeName:c,signInDetails:i}),u?(await Ae({username:h,...u,NewDeviceMetadata:await xe({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),J(),await Te(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Pe({challengeName:c,challengeParameters:a})}catch(c){J(),j(c);const a=ke(c.name);if(a)return a;throw c}}function le(e=!0){fe.dispatch({type:"RESET"})}async function ho(e){var r,d;const{username:t,password:n}=e,o=(r=T.getConfig().Auth)==null?void 0:r.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};w(o);const s=(d=e.options)==null?void 0:d.clientMetadata;O(!!t,y.EmptySignInUsername),O(!!n,y.EmptySignInPassword);try{const{ChallengeName:c,ChallengeParameters:a,AuthenticationResult:u,Session:l}=await pc(t,n,s,o,V),h=Je(t);return Re({signInSession:l,username:h,challengeName:c,signInDetails:i}),u?(await Ae({username:h,...u,NewDeviceMetadata:await xe({userPoolId:o.userPoolId,userPoolEndpoint:o.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),J(),await Te(),le(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Pe({challengeName:c,challengeParameters:a})}catch(c){J(),le(),j(c);const a=ke(c.name);if(a)return a;throw c}}async function xc(e){var d;const{username:t,password:n,options:o}=e,i=(d=T.getConfig().Auth)==null?void 0:d.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};w(i);const r=o==null?void 0:o.clientMetadata;O(!!t,y.EmptySignInUsername),O(!!n,y.EmptySignInPassword);try{const{ChallengeName:c,ChallengeParameters:a,AuthenticationResult:u,Session:l}=await Fe(hc,[t,n,r,i,V],t,V),h=Je(t);return Re({signInSession:l,username:h,challengeName:c,signInDetails:s}),u?(await Ae({...u,username:h,NewDeviceMetadata:await xe({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),J(),await Te(),le(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Pe({challengeName:c,challengeParameters:a})}catch(c){J(),le(),j(c);const a=ke(c.name);if(a)return a;throw c}}async function _c({username:e,clientMetadata:t,config:n,tokenOrchestrator:o,preferredChallenge:i,password:s,session:r}){const{userPoolId:d,userPoolClientId:c,userPoolEndpoint:a}=n,u=F({username:e,userPoolId:d,userPoolClientId:c}),l={USERNAME:e};if(i){if(i==="PASSWORD_SRP")return O(!!s,y.EmptySignInPassword),Jo({username:e,password:s,clientMetadata:t,config:n,tokenOrchestrator:o,authFlow:"USER_AUTH",preferredChallenge:i});i==="PASSWORD"&&(O(!!s,y.EmptySignInPassword),l.PASSWORD=s),l.PREFERRED_CHALLENGE=i}const h={AuthFlow:"USER_AUTH",AuthParameters:l,ClientMetadata:t,ClientId:c,UserContextData:u};r&&(h.Session=r);const f=await je({endpointResolver:v({endpointOverride:a})})({region:C(d),userAgentValue:U(R.SignIn)},h);return _e(e),f}async function Pc(e){var c;const{username:t,password:n,options:o}=e,i=(c=T.getConfig().Auth)==null?void 0:c.Cognito,s={loginId:t,authFlowType:"USER_AUTH"};w(i);const r=o==null?void 0:o.clientMetadata,d=o==null?void 0:o.preferredChallenge;O(!!t,y.EmptySignInUsername);try{const a={username:t,config:i,tokenOrchestrator:V,clientMetadata:r,preferredChallenge:d,password:n},u=fe.getState();u.active&&u.username===t&&(a.session=u.session);const l=await _c(a),h=Je(t);return Re({signInSession:l.Session,username:h,challengeName:l.ChallengeName,signInDetails:s}),l.AuthenticationResult?(await Ae({username:h,...l.AuthenticationResult,NewDeviceMetadata:await xe({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:l.AuthenticationResult.NewDeviceMetadata,accessToken:l.AuthenticationResult.AccessToken}),signInDetails:s}),J(),await Te(),le(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Pe({challengeName:l.ChallengeName,challengeParameters:l.ChallengeParameters,availableChallenges:"AvailableChallenges"in l?l.AvailableChallenges:void 0})}catch(a){J(),le(),j(a);const u=ke(a.name);if(u)return u;throw a}}async function Nc(e){var n;le(!1);const t=(n=e.options)==null?void 0:n.authFlowType;switch(await vc(),t){case"USER_SRP_AUTH":return ho(e);case"USER_PASSWORD_AUTH":return xc(e);case"CUSTOM_WITHOUT_SRP":return Tc(e);case"CUSTOM_WITH_SRP":return Rc(e);case"USER_AUTH":return Pc(e);default:return ho(e)}}const Uc=3*60*1e3;function Mc(e){const t=rt.listen("auth-internal",async({payload:o})=>{switch(o.event){case"confirmSignUp":{const i=o.data;i!=null&&i.isSignUpComplete&&(rt.dispatch("auth-internal",{event:"autoSignIn"}),t())}}}),n=setTimeout(()=>{t(),clearTimeout(n),le()},Uc)}const bc=()=>async e=>{if(e.statusCode>=300){const t=await be(e);if(j(t),t.name===Rt.InvalidParameterException&&/'password'/.test(t.message)&&/Member must not be null/.test(t.message)){const n=y.EmptySignUpPassword,{message:o,recoverySuggestion:i}=Lo[n];throw new I({name:n,message:o,recoverySuggestion:i})}throw new I({name:t.name,message:t.message})}return $e(e)},Dc=e=>Y(ie,oe("SignUp"),bc(),{...se,...e});async function Oc(e){var M;const{username:t,password:n,options:o}=e,i=(M=T.getConfig().Auth)==null?void 0:M.Cognito,s=(i==null?void 0:i.signUpVerificationMethod)??"code",{clientMetadata:r,validationData:d,autoSignIn:c}=e.options??{};w(i),O(!!t,y.EmptySignUpUsername);const a=typeof c!="boolean"?c:void 0;a==null||a.authFlowType;const{userPoolId:u,userPoolClientId:l,userPoolEndpoint:h}=i,p=Dc({endpointResolver:v({endpointOverride:h})}),f={Username:t,Password:void 0,UserAttributes:(o==null?void 0:o.userAttributes)&&Un(o==null?void 0:o.userAttributes),ClientMetadata:r,ValidationData:d&&Un(d),ClientId:l,UserContextData:F({username:t,userPoolId:u,userPoolClientId:l})};n&&(f.Password=n);const{UserSub:E,CodeDeliveryDetails:m,UserConfirmed:S,Session:P}=await p({region:C(u),userAgentValue:U(R.SignUp)},f);(a||c===!0)&&(fe.dispatch({type:"START"}),fe.dispatch({type:"SET_USERNAME",value:t}),fe.dispatch({type:"SET_SESSION",value:P}));const K={destination:m==null?void 0:m.Destination,deliveryMedium:m==null?void 0:m.DeliveryMedium,attributeName:m==null?void 0:m.AttributeName},pe=!!S,A=fe.getState().active;if(pe)return A?{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:E}:{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:E};if(A){if(s==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:K},userId:E};Mc()}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:K},userId:E}}const Fc=e=>Y(ie,oe("ResendConfirmationCode"),he(),{...se,...e});async function kc(e){var p,f;const{username:t}=e;O(!!t,y.EmptySignUpUsername);const n=(p=T.getConfig().Auth)==null?void 0:p.Cognito;w(n);const{userPoolClientId:o,userPoolId:i,userPoolEndpoint:s}=n,r=(f=e.options)==null?void 0:f.clientMetadata,d=F({username:t,userPoolId:i,userPoolClientId:o}),c=Fc({endpointResolver:v({endpointOverride:s})}),{CodeDeliveryDetails:a}=await c({region:C(n.userPoolId),userAgentValue:U(R.ResendSignUpCode)},{Username:t,ClientMetadata:r,ClientId:n.userPoolClientId,UserContextData:d}),{DeliveryMedium:u,AttributeName:l,Destination:h}={...a};return{destination:h,deliveryMedium:u,attributeName:l||void 0}}const Lc=e=>Y(ie,oe("ConfirmSignUp"),he(),{...se,...e});async function Kc(e){var h;const{username:t,confirmationCode:n,options:o}=e,i=(h=T.getConfig().Auth)==null?void 0:h.Cognito;w(i);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d}=i,c=o==null?void 0:o.clientMetadata;O(!!t,y.EmptyConfirmSignUpUsername),O(!!n,y.EmptyConfirmSignUpCode);const a=F({username:t,userPoolId:s,userPoolClientId:r}),u=Lc({endpointResolver:v({endpointOverride:d})}),{Session:l}=await u({region:C(i.userPoolId),userAgentValue:U(R.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:c,ForceAliasCreation:o==null?void 0:o.forceAliasCreation,ClientId:i.userPoolClientId,UserContextData:a});return new Promise((p,f)=>{try{const E={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},m=fe.getState();if(!m.active||m.username!==t){p(E),le();return}fe.dispatch({type:"SET_SESSION",value:l});const S=rt.listen("auth-internal",({payload:P})=>{switch(P.event){case"autoSignIn":p({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),S()}});rt.dispatch("auth-internal",{event:"confirmSignUp",data:E})}catch(E){f(E)}})}async function wt(e){var a;const{challengeResponse:t,options:n}=e,{username:o,challengeName:i,signInSession:s,signInDetails:r}=ne.getState(),d=(a=T.getConfig().Auth)==null?void 0:a.Cognito;w(d);const c=n==null?void 0:n.clientMetadata;if(O(!!t,y.EmptyChallengeResponse),!o||!i||!s)throw new I({name:ue.SignInException,message:`
			An error occurred during the sign in process.

			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow and session has expired.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the session has not expired."});try{const{Session:u,ChallengeName:l,AuthenticationResult:h,ChallengeParameters:p}=await yc(o,i,s,t,d,V,c,n);return Re({signInSession:u,username:o,challengeName:l,signInDetails:r}),h?(await Ae({username:o,...h,NewDeviceMetadata:await xe({userPoolId:d.userPoolId,userPoolEndpoint:d.userPoolEndpoint,newDeviceMetadata:h.NewDeviceMetadata,accessToken:h.AccessToken}),signInDetails:r}),J(),await Te(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Pe({challengeName:l,challengeParameters:p})}catch(u){j(u);const l=ke(u.name);if(l)return l;throw u}}function Wc(e,t){{const n=(e==null?void 0:e.find(Bc))??(e==null?void 0:e.find(qc)),o=(e==null?void 0:e.find(Vc))??(e==null?void 0:e.find(Hc));if(n)return n;throw o?Er:fr}}const Bc=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),qc=e=>e.includes(String(window.location.hostname)),Hc=e=>e.startsWith("http://"),Vc=e=>e.startsWith("https://"),$c=async e=>{window!=null&&window.location&&(window.location.href=e.replace("http://","https://"))},Gc=async e=>{await e.clearOAuthData(),V.clearTokens(),await vo(),Ne.dispatch("auth",{event:"signedOut"},"Auth",Ce)},zc=async(e,t=!1,n)=>{go(e);const{loginWith:o,userPoolClientId:i}=e,{domain:s,redirectSignOut:r}=o.oauth,d=Wc(r),c=`https://${s}/logout?${Object.entries({client_id:i,logout_uri:encodeURIComponent(d)}).map(([a,u])=>`${a}=${u}`).join("&")}`;return $c(c)},jc=async(e,t,n,o)=>{const{isOAuthSignIn:i}=await t.loadOAuthSignIn(),s=await n.getOAuthMetadata();if(await Gc(t),i||s!=null&&s.oauthSignIn)return zc(e,!1)},Yc=e=>Y(ie,oe("RevokeToken"),he(),{...se,...e}),Jc=new q("Auth");async function Xc(e){var o;const t=(o=T.getConfig().Auth)==null?void 0:o.Cognito;w(t),await Qc(t);let n;try{go(t),n=!0}catch{n=!1}if(n){const i=new Vo(ze);i.setAuthConfig(t);const{type:s}=await jc(t,i,V)??{};if(s==="error")throw new I({name:mr,message:"An error occurred when attempting to log out from OAuth provider."})}else V.clearTokens(),await vo(),Ne.dispatch("auth",{event:"signedOut"},"Auth",Ce)}async function Qc(e){try{const{userPoolEndpoint:t,userPoolId:n,userPoolClientId:o}=e,i=await V.getTokenStore().loadTokens();Ko(i),Zc(i.accessToken)&&await Yc({endpointResolver:v({endpointOverride:t})})({region:C(n),userAgentValue:U(R.SignOut)},{ClientId:o,Token:i.refreshToken})}catch{Jc.debug("Client signOut error caught but will proceed with token removal")}}const Zc=e=>{var t;return!!((t=e==null?void 0:e.payload)!=null&&t.origin_jti)},ed={identityId:"identityId"},td=new q("DefaultIdentityIdStore");class Xo{setAuthConfig(t){nt(t.Cognito),this.authConfig=t,this._authKeys=nd("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}async loadIdentityId(){var t;nt((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=await this.keyValueStorage.getItem(this._authKeys.identityId);return n?(this._hasGuestIdentityId=!0,{id:n,type:"guest"}):null}}catch(n){return td.log("Error getting stored IdentityId.",n),null}}async storeIdentityId(t){var n;nt((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const nd=(e,t)=>kt(ed)(`com.amplify.${e}`,t),Nt=({endpointOverride:e})=>t=>e?{url:new Ge(e)}:Js(t);function Qo(e){const t=ve(e).payload.iss,n={};if(!t)throw new I({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const o=t.replace(/(^\w+:|^)\/\//,"");return n[o]=e,n}async function od({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const o=await n.loadIdentityId();if(o)return o.id;const i=e!=null&&e.idToken?Qo(e.idToken.toString()):{},s=await id(i,t);return n.storeIdentityId({id:s,type:e?"primary":"guest"}),s}async function id(e,t){const n=t==null?void 0:t.identityPoolId,o=Tt(n),i=zs({endpointResolver:Nt({endpointOverride:t.identityPoolEndpoint})});let s;try{s=(await i({region:o},{IdentityPoolId:n,Logins:e})).IdentityId}catch(r){throw j(r),new I(r)}if(!s)throw new I({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return s}const tt=new q("CognitoCredentialsProvider"),po=50*60*1e3;class Zo{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){tt.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){tt.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){const n=t.authenticated,{tokens:o}=t,{authConfig:i}=t;try{nt(i==null?void 0:i.Cognito)}catch{return}if(!n&&!i.Cognito.allowGuestAccess)return;const{forceRefresh:s}=t,r=this.hasTokenChanged(o),d=await od({tokens:o,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return(s||r)&&this.clearCredentials(),n?(wr(o),this.credsForOIDCTokens(i.Cognito,o,d)):this.getGuestCredentials(d,i.Cognito)}async getGuestCredentials(t,n){var r,d;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return tt.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=Tt(n.identityPoolId),i=_n({endpointResolver:Nt({endpointOverride:n.identityPoolEndpoint})});let s;try{s=await i({region:o},{IdentityId:t})}catch(c){throw j(c),new I(c)}if((r=s==null?void 0:s.Credentials)!=null&&r.AccessKeyId&&((d=s==null?void 0:s.Credentials)!=null&&d.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+po;const c={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:t};return s.IdentityId&&(c.identityId=s.IdentityId,this._identityIdStore.storeIdentityId({id:s.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...c,isAuthenticatedCreds:!1},c}else throw new I({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,n,o){var c,a,u;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return tt.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const i=n.idToken?Qo(n.idToken.toString()):{},s=Tt(t.identityPoolId),r=_n({endpointResolver:Nt({endpointOverride:t.identityPoolEndpoint})});let d;try{d=await r({region:s},{IdentityId:o,Logins:i})}catch(l){throw j(l),new I(l)}if((c=d==null?void 0:d.Credentials)!=null&&c.AccessKeyId&&((a=d==null?void 0:d.Credentials)!=null&&a.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+po;const l={credentials:{accessKeyId:d.Credentials.AccessKeyId,secretAccessKey:d.Credentials.SecretKey,sessionToken:d.Credentials.SessionToken,expiration:d.Credentials.Expiration},identityId:o};return d.IdentityId&&(l.identityId=d.IdentityId,this._identityIdStore.storeIdentityId({id:d.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...l,isAuthenticatedCreds:!0,associatedIdToken:(u=n.idToken)==null?void 0:u.toString()},l}else throw new I({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,o;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((o=t.idToken)==null?void 0:o.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const sd=new Zo(new Xo(ze)),rd={configure(e,t){const n=Io(e),o=new or({sameSite:"lax"}),i=t!=null&&t.ssr?o:ze,s=t!=null&&t.ssr?new Zo(new Xo(o)):sd;if(!n.Auth){T.configure(n,t);return}if(t!=null&&t.Auth){T.configure(n,t);return}if(!T.libraryOptions.Auth){Be.setAuthConfig(n.Auth),Be.setKeyValueStorage(i),T.configure(n,{...t,Auth:{tokenProvider:Be,credentialsProvider:s}});return}if(t){const r=T.libraryOptions.Auth;t.ssr!==void 0&&(Be.setKeyValueStorage(i),r.credentialsProvider=s),T.configure(n,{Auth:r,...t});return}T.configure(n)},getConfig(){return T.getConfig()}},ad="us-east-2",cd="us-east-2_9oCzdeOZF",dd="6f4qoincbfm9g0lifod7q8nuhg";window.__WU_AMPLIFY_CONFIGURED__?console.debug("[auth] Amplify already configured; skipping"):(window.__WU_AMPLIFY_CONFIGURED__=!0,rd.configure({Auth:{Cognito:{region:ad,userPoolId:cd,userPoolClientId:dd,loginWith:{username:!1,email:!0,phone:!1},signUpVerificationMethod:"code"}}}));if(window.__WU_AUTH_INITED__)console.debug("[auth] init already ran; skipping duplicate init");else{let e=function(a,u="success"){const l=document.querySelector("#toast");if(!l){u==="error"?console.error(a):console.log(a);return}l.textContent=a,l.classList.toggle("error",u==="error"),l.style.display="block",setTimeout(()=>l.style.display="none",2600)},t=function(a){a&&a.classList.remove("hidden")},n=function(a){a&&a.classList.add("hidden")},o=function(a,{timeout:u=1e4}={}){return new Promise((l,h)=>{const p=document.querySelector(a);if(p)return l(p);const f=new MutationObserver(()=>{const E=document.querySelector(a);E&&(f.disconnect(),l(E))});f.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout(()=>{f.disconnect(),h(new Error(`Timeout waiting for ${a}`))},u)})},i=function(a){try{return JSON.parse(atob(a.split(".")[1]))||{}}catch{return{}}},d=function(a){var h;const u=(a==null?void 0:a.name)||(a==null?void 0:a.code)||"",l=((a==null?void 0:a.message)||((h=a==null?void 0:a.toString)==null?void 0:h.call(a))||"").replace(/^Error:\s*/,"");switch(u){case"UserNotFoundException":return"No account found for that email.";case"NotAuthorizedException":return"Incorrect email or password.";case"UserNotConfirmedException":return"Please verify your email to continue.";case"LimitExceededException":return"Too many attempts. Please wait a bit and try again.";case"CodeMismatchException":return"That code didn’t match. Double-check and try again.";case"ExpiredCodeException":return"That code expired. Please request a new one.";case"InvalidParameterException":return"Invalid input. Please review the form.";case"InvalidPasswordException":return"Password doesn’t meet the requirements.";case"TooManyRequestsException":return"Too many requests right now. Try again shortly.";default:return l||"Something went wrong. Please try again."}};var ld=e,hd=t,pd=n,fd=o,gd=i,Ed=d;window.__WU_AUTH_INITED__=!0;async function s(){var a,u;try{const l=await An(),h=(u=(a=l==null?void 0:l.tokens)==null?void 0:a.idToken)==null?void 0:u.toString();return h?i(h)["cognito:groups"]||[]:[]}catch{return[]}}async function r(){var h;const a=await s(),u=!!a||((h=await An().catch(()=>null))==null?void 0:h.tokens);document.querySelectorAll('[data-auth="in"]').forEach(p=>p.style.display=u?"":"none"),document.querySelectorAll('[data-auth="out"]').forEach(p=>p.style.display=u?"none":"");const l=Array.isArray(a)&&a.includes("Promoters");document.querySelectorAll('[data-requires="promoter"]').forEach(p=>p.style.display=l?"":"none")}async function c(){await o("#auth-modal").catch(()=>{});const a=document.querySelectorAll("#auth-modal");a.length>1&&console.warn("[auth] Multiple #auth-modal elements found; using the first.");const u=a[0];if(!u){console.warn("[auth] #auth-modal not found; nothing to wire.");return}const l=u.querySelector("#form-login"),h=u.querySelector("#form-signup"),p=u.querySelector("#form-confirm"),f=u.querySelector("#tab-login"),E=u.querySelector("#tab-signup"),m=u.querySelector("#auth-close"),S=u.querySelector("#resend-code");let P=!1,K=!1,pe=!1;document.addEventListener("click",A=>{A.target.closest("#login-btn, .wu-login")&&(A.preventDefault(),n(h),n(p),t(l),f==null||f.setAttribute("aria-selected","true"),E==null||E.setAttribute("aria-selected","false"),l==null||l.reset(),h==null||h.reset(),p==null||p.reset(),p==null||delete p.dataset.email,p==null||delete p.dataset.mfa,p==null||delete p.dataset.mode,u.showModal())}),m==null||m.addEventListener("click",()=>u.close()),f==null||f.addEventListener("click",()=>{n(h),n(p),t(l),f.setAttribute("aria-selected","true"),E.setAttribute("aria-selected","false")}),E==null||E.addEventListener("click",()=>{n(l),n(p),t(h),E.setAttribute("aria-selected","true"),f.setAttribute("aria-selected","false")}),h==null||h.addEventListener("submit",async A=>{if(A.preventDefault(),K)return;K=!0;const M=new FormData(h),X=String(M.get("email")||"").trim().toLowerCase(),$=String(M.get("password")||""),me=String(M.get("role")||"Wrestler");try{await Oc({username:X,password:$,options:{userAttributes:{email:X,"custom:role":me}}}),n(h),n(l),t(p),p.dataset.email=X,delete p.dataset.mfa,p.dataset.mode="signup",p.reset(),e("We emailed you a confirmation code")}catch(Ie){console.error("[auth] signUp error",Ie),e(d(Ie),"error")}finally{K=!1}}),S==null||S.addEventListener("click",async A=>{A.preventDefault();const M=p.dataset.email;if(!M)return e("No email available to resend to.","error");try{await kc({username:M}),e("Verification code resent")}catch(k){console.error("[auth] resendSignUpCode error",k),e(d(k),"error")}}),p==null||p.addEventListener("submit",async A=>{if(A.preventDefault(),pe)return;pe=!0;const M=String(new FormData(p).get("code")||"").trim();try{if(p.dataset.mfa==="true"){await wt({challengeResponse:M}),delete p.dataset.mfa,delete p.dataset.mode,await r(),u.close(),e("Verification successful — you are in!");return}const k=p.dataset.email;if(!k)throw new Error("Missing email for confirmation");await Kc({username:k,confirmationCode:M}),delete p.dataset.mode,e("Email confirmed! You can log in now."),n(p),t(l)}catch(k){console.error("[auth] confirm error",k),e(d(k),"error")}finally{pe=!1}}),l==null||l.addEventListener("submit",async A=>{var me,Ie;if(A.preventDefault(),P)return;P=!0;const M=new FormData(l),X=String(M.get("email")||"").trim().toLowerCase(),$=String(M.get("password")||"");try{const{nextStep:Q}=await Nc({username:X,password:$,options:{authFlowType:"USER_SRP_AUTH",preferredChallenge:"EMAIL_OTP"}});switch(Q.signInStep){case"DONE":{await r(),u.close(),e("Logged in!");break}case"CONFIRM_SIGN_UP":{n(l),n(h),t(p),p.dataset.email=X,delete p.dataset.mfa,p.dataset.mode="signup",p.reset(),e("Please enter the verification code we emailed you");break}case"CONFIRM_SIGN_IN_WITH_EMAIL_CODE":case"CONFIRM_SIGN_IN_WITH_SMS_CODE":case"CONFIRM_SIGN_IN_WITH_TOTP_CODE":{n(l),n(h),t(p),delete p.dataset.mode,p.dataset.mfa="true",p.reset(),e("Enter the verification code");break}case"CONTINUE_SIGN_IN_WITH_MFA_SELECTION":{const b=(me=Q.allowedMFATypes)!=null&&me.includes("EMAIL")?"EMAIL":(Ie=Q.allowedMFATypes)==null?void 0:Ie[0];await wt({challengeResponse:b}),n(l),n(h),t(p),delete p.dataset.mode,p.dataset.mfa="true",p.reset(),e("Enter the verification code");break}case"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION":{await wt({challengeResponse:"PASSWORD_SRP"}),n(l),n(h),t(p),delete p.dataset.mode,p.dataset.mfa="true",p.reset(),e("Enter the verification code");break}case"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED":{e("New password required by the pool. This UI is not implemented yet.","error");break}default:console.warn("[auth] Unhandled next step:",Q),e("Additional verification step required; not implemented in UI.","error")}}catch(Q){console.error("[auth] signIn error",Q),e(d(Q),"error")}finally{P=!1}}),document.addEventListener("click",async A=>{if(A.target.closest("#logout-btn")){A.preventDefault();try{await Xc(),await r(),e("Logged out")}catch(k){console.error("[auth] signOut error",k),e("Logout failed","error")}}}),r()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()}
