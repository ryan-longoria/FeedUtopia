import{g as u,i as m,a as p}from"./chunks/roles-CaKbrTUl.js";import"https://esm.sh/aws-amplify@6";import"https://esm.sh/aws-amplify@6/auth";import"https://esm.sh/aws-amplify@6/utils";const l=async()=>{try{const t=await u();if(m(t))return;const e=document.querySelector("#search");if(!e)return;e.innerHTML=`
      <h2>Talent Search <span class="badge">Locked</span></h2>
      <div class="mt-2">
        <p class="muted">Only promoters can search wrestler profiles.</p>
        <a href="#" class="btn small" data-auth="out" id="become-promoter">Create a free promoter account</a>
      </div>
    `}catch(t){console.error("talent-lock failed",t)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l,{once:!0}):l();const d=()=>{const t=document.getElementById("wrestler-modal"),e=document.getElementById("wm-close");t&&e&&e.addEventListener("click",()=>t.close())};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d,{once:!0}):d();function a(t="generic"){var e;try{if((e=window.Auth)!=null&&e.open){window.Auth.open("signup",{intent:t});return}window.dispatchEvent(new CustomEvent("auth:open",{detail:{mode:"signup",intent:t}}));const n=document.getElementById("login-btn");n&&n.click()}catch(n){console.error("openSignup failed",n)}}document.addEventListener("click",async t=>{var n,s,c,i;const e=t.target.closest("a,button");if(e){if(e.dataset.auth==="out"){t.preventDefault();const r=(n=e.id)!=null&&n.includes("promoter")?"promoter":(s=e.id)!=null&&s.includes("talent")?"wrestler":(c=e.getAttribute("aria-label"))!=null&&c.includes("Promoter")?"promoter":(i=e.getAttribute("aria-label"))!=null&&i.includes("Talent")?"wrestler":"generic";a(r);return}if(e.dataset.requires){t.preventDefault();try{const r=await u(),o=e.dataset.requires;o==="wrestler"&&p(r)||o==="promoter"&&m(r)?window.location.href=e.getAttribute("href")||"#":a(o)}catch(r){console.error("auth-cta role check failed",r),a(e.dataset.requires||"generic")}}}});
